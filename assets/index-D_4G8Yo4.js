import{r,j as e,e as mt,c as pt}from"./vendor-BraaEMZl.js";import{i as bt,g as ht,a as gt,G as ft,o as jt,q as G,c as V,b as J,d as ie,w as Q,e as B,f as Nt,s as ce,h as yt,j as vt,k as Ne,l as W,u as ye,m as ve}from"./firebase-DIMHwxaP.js";import{A as wt,C as X,H as we,a as de,b as St,S as Se,L as kt,c as ke,M as Ce,G as De,T as Ae,Z as Ct,F as Dt,d as At,e as Et,f as It,V as Ee,P as Ie,B as xe,U as Re,g as ue,h as Z,R as Rt,i as Tt,j as Te,X as ee,k as qt,l as qe,m as Le,n as _e,o as Lt,p as _t,q as zt,r as Ot,s as Ft,t as ze,u as Ut,v as Mt,D as $t,E as Pt,w as Oe,x as Vt,y as Fe,z as Bt,I as Gt,J as Ht}from"./icons-BzUtBE77.js";(function(){const L=document.createElement("link").relList;if(L&&L.supports&&L.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))F(I);new MutationObserver(I=>{for(const M of I)if(M.type==="childList")for(const $ of M.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&F($)}).observe(document,{childList:!0,subtree:!0});function te(I){const M={};return I.integrity&&(M.integrity=I.integrity),I.referrerPolicy&&(M.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?M.credentials="include":I.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function F(I){if(I.ep)return;I.ep=!0;const M=te(I);fetch(I.href,M)}})();const Yt={apiKey:"AIzaSyBrhttq9MepUX3ixZKbRvASR7BdjPVqugY",authDomain:"salpointe-cte-hub.firebaseapp.com",projectId:"salpointe-cte-hub",storageBucket:"salpointe-cte-hub.appspot.com",messagingSenderId:"462271958444",appId:"1:462271958444:web:78ee9c184dd9985fa0be09"},$e=bt(Yt),z=ht($e),me=gt($e),Jt=new ft,Ue="/assets/SC-LOGO-RGB-1tQQU51o.png",pe={SERVICE_ID:"service_dp1gjh1",TEMPLATE_ID:"template_kyo4h1e",PUBLIC_KEY:"CZo6tBrAGwmjLwTr6"},Me=["krashka@salpointe.org","jelias@salpointe.org","cneff@salpointe.org","vdunk@salpointe.org","amartin@salpointe.org","jharris@salpointe.org","lsaulsby@salpointe.org","cjones@salpointe.org","cbarry@salpointe.org","erivers@salpointe.org"],be={"Cinema Camera Kit":{count:1,category:"film",requiresTraining:!0},"Gimbal / Stabilizer":{count:6,category:"film",requiresTraining:!0},"DJI Mic Kit (Wireless)":{count:4,category:"film",requiresTraining:!1},"DJI Flip Drone":{count:1,category:"film",requiresTraining:!0},"Lighting Kit":{count:6,category:"film",requiresTraining:!1},Tripod:{count:8,category:"general",requiresTraining:!1},"DSLR Camera Body":{count:6,category:"photo",requiresTraining:!0},"Zoom Lens (18-55mm)":{count:6,category:"photo",requiresTraining:!1},"Telephoto Lens (70-200mm)":{count:2,category:"photo",requiresTraining:!1},"Portrait Lens (50mm)":{count:3,category:"photo",requiresTraining:!1},"SD Card Reader":{count:5,category:"photo",requiresTraining:!1},"Flash Unit":{count:3,category:"photo",requiresTraining:!1},"Serving Trays":{count:10,category:"culinary",requiresTraining:!1},"Chafing Dishes":{count:4,category:"culinary",requiresTraining:!1}},j={LANDING:"landing",DASHBOARD:"dashboard",FILM:"film",GRAPHIC:"graphic",BUSINESS:"business",CULINARY:"culinary",PHOTO:"photo",CALENDAR:"calendar",QUEUE:"queue",MY_REQUESTS:"my_requests",ANALYTICS:"analytics",INVENTORY:"inventory",FEEDBACK:"feedback",GAME:"game"},Y=A=>`salpointe_draft_${A}`,he=A=>{mt.send(pe.SERVICE_ID,pe.TEMPLATE_ID,A,pe.PUBLIC_KEY).then(L=>console.log("EMAIL SUCCESS!",L.status,L.text),L=>console.log("EMAIL FAILED...",L))},Kt=()=>{const[A,L]=r.useState("landing"),[te,F]=r.useState(!1),[I,M]=r.useState(null),[$,se]=r.useState(!1),[ae,re]=r.useState(be),[le,Pe]=r.useState([]),[Ve,ge]=r.useState(0);r.useEffect(()=>{const m=jt(me,p=>{p?(M(p),se(Me.includes(p.email))):(M(null),se(!1))});return()=>m()},[]),r.useEffect(()=>{(async()=>{const u=B(z,"settings","inventory_v2"),N=await Nt(u);N.exists()?re(N.data()):(await ce(u,be),re(be))})();const p=G(V(z,"blackout_dates")),n=J(p,u=>{const N=u.docs.map(o=>o.id);Pe(N)});return()=>n()},[]);const fe=async()=>{try{await vt(me,Jt),L(j.DASHBOARD)}catch(m){console.error("Login failed:",m),alert("Login failed.")}},Be=async()=>{await yt(me),L("landing")},Ge=()=>{L("landing"),F(!1)},P=()=>{L(j.DASHBOARD),F(!1)},He=()=>{const m=Ve+1;ge(m),m===7&&(L(j.GAME),ge(0))},Ye=[j.FILM,j.GRAPHIC,j.BUSINESS,j.CULINARY,j.PHOTO].includes(A);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-cyan-500/30 flex flex-col",children:[e.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(6, 182, 212, 0.15) 1px, transparent 0)",backgroundSize:"32px 32px"}}),e.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none bg-gradient-to-b from-transparent via-slate-950/50 to-slate-950"}),e.jsx("header",{className:"bg-slate-900/80 backdrop-blur-xl border-b border-slate-800 sticky top-0 z-50 shadow-[0_4px_20px_rgba(0,0,0,0.4)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 md:py-4 flex flex-wrap items-center justify-between gap-y-3 relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-4 cursor-pointer group",onClick:Ge,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-600 blur-lg opacity-40 group-hover:opacity-60 transition-opacity rounded-full"}),e.jsx("img",{src:Ue,alt:"Salpointe Logo",className:"w-10 h-10 relative z-10 object-contain"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg md:text-xl font-bold tracking-wider text-white group-hover:text-cyan-400 transition-colors flex items-center gap-2",children:["SALPOINTE ",e.jsx("span",{className:"text-red-500",children:"CTE"})]}),e.jsx("p",{className:"text-[10px] md:text-xs text-cyan-500 uppercase tracking-[0.2em] font-mono",children:"Tech Command Hub"})]})]}),e.jsxs("nav",{className:"flex items-center gap-1 md:gap-2 ml-auto",children:[!Ye&&A!=="landing"&&A!=="dashboard"&&e.jsxs("button",{onClick:P,className:"text-xs md:text-sm bg-slate-800 hover:bg-slate-700 border border-slate-700 text-cyan-400 px-3 py-2 rounded-lg transition-all flex items-center gap-2 mr-1 hover:shadow-[0_0_10px_rgba(6,182,212,0.2)]",children:[e.jsx(wt,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),A!=="landing"&&e.jsxs("button",{onClick:()=>{L(j.CALENDAR),F(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${A===j.CALENDAR?"bg-cyan-950/50 border-cyan-500 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.15)]":"border-transparent text-slate-400 hover:text-cyan-400 hover:bg-slate-800"}`,children:[e.jsx(X,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Schedule"})]}),I?e.jsxs(e.Fragment,{children:[A!=="landing"&&e.jsxs("button",{onClick:()=>{L(j.MY_REQUESTS),F(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${A===j.MY_REQUESTS?"bg-cyan-950/50 border-cyan-500 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.15)]":"border-transparent text-slate-400 hover:text-cyan-400 hover:bg-slate-800"}`,children:[e.jsx(we,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"My Requests"})]}),$&&A!=="landing"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{L(j.QUEUE),F(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${A===j.QUEUE?"bg-purple-950/50 border-purple-500 text-purple-400 shadow-[0_0_10px_rgba(168,85,247,0.15)]":"border-transparent text-slate-400 hover:text-purple-400 hover:bg-slate-800"}`,children:[e.jsx(de,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Queue"})]}),e.jsxs("button",{onClick:()=>{L(j.ANALYTICS),F(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${A===j.ANALYTICS?"bg-emerald-950/50 border-emerald-500 text-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.15)]":"border-transparent text-slate-400 hover:text-emerald-400 hover:bg-slate-800"}`,children:[e.jsx(St,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),e.jsxs("button",{onClick:()=>{L(j.INVENTORY),F(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${A===j.INVENTORY?"bg-amber-950/50 border-amber-500 text-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.15)]":"border-transparent text-slate-400 hover:text-amber-400 hover:bg-slate-800"}`,children:[e.jsx(Se,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Stock"})]})]}),e.jsx("div",{className:"w-px h-6 bg-slate-700 mx-1"}),e.jsx("button",{onClick:Be,className:"ml-1 text-xs md:text-sm font-medium px-3 py-2 rounded-lg border border-red-900/30 hover:border-red-500 text-red-400 hover:bg-red-950/30 transition-all flex items-center gap-2",title:`Logged in as ${I.email}`,children:e.jsx(kt,{size:16})})]}):e.jsxs("button",{onClick:fe,className:"ml-2 text-xs md:text-sm font-bold bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-500 transition-all flex items-center gap-2 shadow-[0_0_15px_rgba(8,145,178,0.4)] border border-cyan-400",children:[e.jsx(ke,{size:16})," Login"]})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6 md:py-10 relative z-10 flex-grow w-full",children:te?e.jsx(Ke,{onReset:P}):e.jsxs(e.Fragment,{children:[A===j.LANDING&&e.jsx(Je,{currentUser:I,onLogin:fe,onEnter:P}),A===j.DASHBOARD&&e.jsx(Qe,{onViewChange:L,currentUser:I}),A===j.FILM&&e.jsx(rt,{setSubmitted:F,onCancel:P,currentUser:I,inventory:ae,blackouts:le}),A===j.GRAPHIC&&e.jsx(lt,{setSubmitted:F,onCancel:P,currentUser:I}),A===j.BUSINESS&&e.jsx(nt,{setSubmitted:F,onCancel:P,currentUser:I}),A===j.CULINARY&&e.jsx(ot,{setSubmitted:F,onCancel:P,currentUser:I}),A===j.PHOTO&&e.jsx(it,{setSubmitted:F,onCancel:P,currentUser:I,inventory:ae,blackouts:le}),A===j.CALENDAR&&e.jsx(st,{adminMode:$,blackouts:le}),A===j.QUEUE&&e.jsx(at,{adminMode:$,setAdminMode:se,ALLOWED_ADMINS:Me}),A===j.MY_REQUESTS&&e.jsx(tt,{currentUser:I}),A===j.ANALYTICS&&$&&e.jsx(et,{}),A===j.INVENTORY&&$&&e.jsx(Xe,{inventory:ae,setInventory:re}),A===j.FEEDBACK&&e.jsx(Ze,{currentUser:I,adminMode:$,setSubmitted:F,onCancel:P}),A===j.GAME&&e.jsx(je,{onExit:P})]})}),e.jsx("footer",{className:"text-center py-8 px-4 border-t border-slate-800/50 mt-auto relative z-10 bg-slate-900/50",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 opacity-60 hover:opacity-100 transition-opacity duration-500",children:[e.jsx("img",{src:Ue,alt:"Salpointe Catholic High School",className:"w-8 h-8 opacity-80 grayscale hover:grayscale-0 transition-all"}),e.jsxs("p",{onClick:He,className:"text-slate-500 text-xs font-mono tracking-widest uppercase cursor-default select-none",children:["© ",new Date().getFullYear()," Salpointe Catholic High School ",e.jsx("span",{className:"text-slate-700 mx-2",children:"|"})," CTE Department"]}),e.jsxs("button",{onClick:()=>L(j.FEEDBACK),className:"text-xs text-cyan-600 hover:text-cyan-400 flex items-center gap-1 transition-colors mt-2",children:[e.jsx(Ce,{size:12})," Feedback & Support"]})]})})]});function Je({currentUser:m,onLogin:p,onEnter:n}){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center space-y-12 animate-fade-in",children:[e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-950/50 border border-cyan-500/30 text-cyan-400 text-xs font-mono uppercase tracking-widest animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.8)]"}),"System Online v1.0"]}),e.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-white tracking-tight leading-tight",children:["Master the Tools. ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Create Without Limits."})]}),e.jsx("p",{className:"text-lg md:text-xl text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"Your direct link to the CTE professional inventory. Secure the assets you need to build your portfolio—from cinema cameras to culinary prep. If you can dream it, you can reserve it."}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-4",children:m?e.jsxs("button",{onClick:n,className:"group relative px-8 py-4 bg-cyan-600 hover:bg-cyan-500 text-white text-lg font-bold rounded-xl shadow-[0_0_20px_rgba(8,145,178,0.4)] transition-all flex items-center gap-3 w-full sm:w-auto justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e.jsx(Ct,{size:24,className:"fill-white"})," Initialize Hub"]}):e.jsxs("button",{onClick:p,className:"group px-8 py-4 bg-white text-slate-900 hover:bg-slate-200 text-lg font-bold rounded-xl shadow-lg transition-all flex items-center gap-3 w-full sm:w-auto justify-center",children:[e.jsx(ke,{size:24})," Login to Access"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full text-left",children:[e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-red-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-red-900/20 rounded-lg flex items-center justify-center text-red-500 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Dt,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Paperless Protocol"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Deprecated legacy analog logs. Requests are now digital, trackable, and impossible to lose."})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-cyan-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-lg flex items-center justify-center text-cyan-400 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(At,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Real-Time Inventory"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Live database tracking prevents double-bookings. See exactly what gear is available, instantly."})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-emerald-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-900/20 rounded-lg flex items-center justify-center text-emerald-400 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Et,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Secure Access"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Authenticated via Salpointe Google Workspace. Your data is protected and your history is saved."})]})]})]})}function Ke({onReset:m}){return e.jsxs("div",{className:"max-w-lg mx-auto bg-slate-900/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-800 p-8 text-center animate-fade-in-up",children:[e.jsx("div",{className:"w-20 h-20 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-6 text-green-400 shadow-[0_0_20px_rgba(74,222,128,0.2)]",children:e.jsx(It,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2 tracking-tight",children:"Request Transmitted"}),e.jsx("p",{className:"text-slate-400 mb-8 text-sm leading-relaxed",children:"Your data has been securely logged in the mainframe. The department head has been notified via quantum link (email)."}),e.jsx("button",{onClick:m,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-3 rounded-lg font-semibold transition-all shadow-[0_0_15px_rgba(8,145,178,0.4)]",children:"Return to Dashboard"})]})}function Qe({onViewChange:m,currentUser:p}){const[n,u]=r.useState({});r.useEffect(()=>{(()=>{const S={},i={[j.FILM]:"Film",[j.GRAPHIC]:"Graphic",[j.BUSINESS]:"Business",[j.CULINARY]:"Culinary",[j.PHOTO]:"Photo"};Object.keys(i).forEach(k=>{const v=Y(i[k]);localStorage.getItem(v)&&(S[k]=!0)}),u(S)})()},[]);const N=[{id:j.FILM,title:"Film & TV",icon:Ee,desc:"Checkout cameras, drones, and broadcast equipment.",color:"text-cyan-400",bg:"group-hover:shadow-cyan-500/20 group-hover:border-cyan-500/50"},{id:j.GRAPHIC,title:"Graphic Design",icon:Ie,desc:"Request logos, posters, websites, and creative assets.",color:"text-fuchsia-400",bg:"group-hover:shadow-fuchsia-500/20 group-hover:border-fuchsia-500/50"},{id:j.BUSINESS,title:"Business",icon:xe,desc:"Submit business plans and startup consultations.",color:"text-emerald-400",bg:"group-hover:shadow-emerald-500/20 group-hover:border-emerald-500/50"},{id:j.CULINARY,title:"Culinary Arts",icon:Re,desc:"Catering services for school clubs and events.",color:"text-amber-400",bg:"group-hover:shadow-amber-500/20 group-hover:border-amber-500/50"},{id:j.PHOTO,title:"Photography",icon:ue,desc:"Reserve DSLR bodies, lenses, and event coverage.",color:"text-pink-400",bg:"group-hover:shadow-pink-500/20 group-hover:border-pink-500/50"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-full mb-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white tracking-tight mb-2",children:p?`Welcome, ${p.displayName.split(" ")[0]}.`:"Access Granted."}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Select a sector to initialize a request."})]}),N.map(o=>e.jsxs("div",{onClick:()=>m(o.id),className:`group relative bg-slate-900/40 backdrop-blur-sm rounded-2xl p-6 cursor-pointer border border-slate-800 transition-all duration-300 hover:-translate-y-1 ${o.bg}`,children:[n[o.id]&&e.jsxs("span",{className:"absolute top-4 right-4 bg-amber-500/10 text-amber-400 border border-amber-500/30 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(Z,{size:12})," RESUME"]}),e.jsx("div",{className:`w-14 h-14 rounded-xl bg-slate-800/50 flex items-center justify-center mb-5 ${o.color} transition-transform group-hover:scale-110 duration-300`,children:e.jsx(o.icon,{size:28})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-cyan-400 transition-colors",children:o.title}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:o.desc})]},o.id))]})}function We({initialData:m={},currentUser:p}){const n=p?.displayName||m.fullName||"",u=p?.email||m.email||"";return e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-slate-800 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 flex items-center gap-2",children:[e.jsx(Ht,{size:18})," Identity Verification"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Project Designation"}),e.jsx("input",{name:"requestName",type:"text",defaultValue:m.requestName||"",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",placeholder:"e.g. Football Video",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Full Name"}),e.jsx("input",{name:"fullName",type:"text",defaultValue:n,readOnly:!!p,className:`w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all ${p?"opacity-70 cursor-not-allowed":""}`,placeholder:"Jane Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Comm Link (Email)"}),e.jsx("input",{name:"email",type:"email",defaultValue:u,readOnly:!!p,className:`w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all ${p?"opacity-70 cursor-not-allowed":""}`,placeholder:"jdoe@salpointe.org",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Clearance Level"}),e.jsxs("select",{name:"role",defaultValue:m.role||"Student",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",children:[e.jsx("option",{children:"Student"}),e.jsx("option",{children:"Faculty / Staff"}),e.jsx("option",{children:"Club Representative"})]})]})]})]})}function Xe({inventory:m,setInventory:p}){const[n,u]=r.useState(m),[N,o]=r.useState(!1),[S,i]=r.useState(""),[k,v]=r.useState(1),[E,C]=r.useState("film"),[D,h]=r.useState(!1),[g,y]=r.useState(null),[R,T]=r.useState(""),[x,d]=r.useState(!1),b=(f,w,_)=>{u(O=>({...O,[f]:{...O[f],[w]:_}}))},a=f=>{if(window.confirm(`Delete "${f}" from inventory permanently?`)){const w={...n};delete w[f],u(w)}},s=f=>{if(f.preventDefault(),!S)return;const w=S.trim();if(n[w]){alert("Item already exists.");return}u(_=>({..._,[w]:{count:parseInt(k)||0,category:E,requiresTraining:D}})),i(""),v(1),h(!1)},c=(f,w)=>{y(f),T(f),d(w.requiresTraining||!1)},t=()=>{y(null),T(""),d(!1)},l=()=>{if(!R.trim())return;const f=R.trim(),_={...n[g],requiresTraining:x},O={...n};if(f!==g){if(O[f]){alert("An item with this name already exists.");return}delete O[g],O[f]=_}else O[f]=_;u(O),y(null)},q=async()=>{o(!0);try{await ce(B(z,"settings","inventory_v2"),n),p(n),alert("Inventory matrix updated.")}catch(f){console.error("Error:",f),alert("Save failed.")}o(!1)},U={film:[],photo:[],culinary:[],general:[]};return Object.entries(n).forEach(([f,w])=>{U[w.category]?U[w.category].push({name:f,...w}):U.general.push({name:f,...w})}),e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-slate-950/50 border-b border-slate-800 p-6 flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Se,{className:"text-amber-400"})," Inventory Matrix"]})}),e.jsxs("button",{onClick:q,disabled:N,className:"bg-amber-600 hover:bg-amber-500 text-slate-900 px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 shadow-[0_0_15px_rgba(245,158,11,0.3)]",children:[N?e.jsx(Rt,{className:"animate-spin",size:18}):e.jsx(Z,{size:18})," ",N?"Processing...":"Save Changes"]})]}),e.jsxs("div",{className:"p-6 bg-slate-900/30 border-b border-slate-800",children:[e.jsx("h3",{className:"text-sm font-mono text-cyan-500 uppercase mb-3",children:"Add New Asset"}),e.jsxs("form",{onSubmit:s,className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Item Name"}),e.jsx("input",{type:"text",value:S,onChange:f=>i(f.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm focus:border-cyan-500 outline-none",placeholder:"e.g. GoPro Hero 10",required:!0})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Count"}),e.jsx("input",{type:"number",min:"0",value:k,onChange:f=>v(f.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm focus:border-cyan-500 outline-none"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Category"}),e.jsxs("select",{value:E,onChange:f=>C(f.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm focus:border-cyan-500 outline-none",children:[e.jsx("option",{value:"film",children:"Film"}),e.jsx("option",{value:"photo",children:"Photo"}),e.jsx("option",{value:"culinary",children:"Culinary"}),e.jsx("option",{value:"general",children:"General"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:f=>h(f.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-950 text-cyan-500 focus:ring-cyan-500"}),e.jsx("label",{className:"text-sm text-slate-400",children:"Training Req."})]}),e.jsxs("button",{type:"submit",className:"bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded font-medium flex items-center gap-1",children:[e.jsx(Tt,{size:16})," Add"]})]})]}),e.jsx("div",{className:"p-6 space-y-8",children:Object.entries(U).map(([f,w])=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white capitalize mb-4 border-b border-slate-800 pb-2 text-emerald-400",children:[f," Inventory"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(_=>e.jsxs("div",{className:"bg-slate-800/30 p-3 rounded-lg border border-slate-700 flex justify-between items-center hover:border-slate-600 transition-colors",children:[g===_.name?e.jsxs("div",{className:"flex-1 flex items-center gap-2 mr-2",children:[e.jsx("input",{type:"text",value:R,onChange:O=>T(O.target.value),className:"flex-1 bg-slate-950 border border-cyan-500 rounded p-1 text-white text-sm outline-none",autoFocus:!0}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-400",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:O=>d(O.target.checked)})," Train"]}),e.jsx("button",{onClick:l,className:"text-green-500 hover:text-green-400 p-1",children:e.jsx(Te,{size:18})}),e.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-400 p-1",children:e.jsx(ee,{size:18})})]}):e.jsxs("div",{className:"flex-1 mr-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-slate-300 text-sm block truncate",children:_.name.replace(" *","").replace("*","")}),_.requiresTraining&&e.jsx("span",{className:"text-[10px] text-red-400 uppercase bg-red-900/20 px-1 rounded",children:"Training Req."})]}),e.jsx("button",{onClick:()=>c(_.name,_),className:"text-slate-600 hover:text-cyan-400 p-1 ml-2",children:e.jsx(qt,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2 border-l border-slate-700 pl-3",children:[e.jsx("span",{className:"text-xs text-slate-500 uppercase",children:"Qty"}),e.jsx("input",{type:"number",min:"0",value:_.count,onChange:O=>b(_.name,"count",parseInt(O.target.value)),className:"w-14 p-1 bg-slate-950 border border-slate-700 rounded text-center font-bold text-cyan-400 focus:border-cyan-500 outline-none text-sm"}),e.jsx("button",{onClick:()=>a(_.name),className:"text-slate-600 hover:text-red-500 transition-colors ml-1",children:e.jsx(qe,{size:16})})]})]},_.name))})]},f))})]})}function Ze({currentUser:m,adminMode:p,setSubmitted:n,onCancel:u}){const[N,o]=r.useState("bug"),[S,i]=r.useState(""),[k,v]=r.useState([]);r.useEffect(()=>{if(p){const h=G(V(z,"feedback"),ie("createdAt","desc")),g=J(h,y=>{const R=y.docs.map(T=>({id:T.id,...T.data()}));v(R)});return()=>g()}},[p]);const E=async h=>{if(h.preventDefault(),!!S.trim())try{const g={type:N,message:S,email:m?.email||"Anonymous",fullName:m?.displayName||"Guest",createdAt:new Date,status:"Open"};await ve(V(z,"feedback"),g),N==="bug"&&he({to_name:"Admin",to_email:"erivers@salpointe.org",subject:"[BUG REPORT] CTE Hub Issue",title:"Bug Report",status:"Urgent",message:`User ${g.fullName} reported a bug:

${S}`}),alert("Feedback received."),i(""),p||u()}catch(g){console.error(g),alert("Error sending feedback.")}},C=async h=>{window.confirm("Mark Resolved?")&&await ye(B(z,"feedback",h),{status:"Resolved"})},D=async h=>{window.confirm("Delete feedback?")&&await W(B(z,"feedback",h))};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-cyan-950/30 border border-cyan-500/30 text-cyan-400",children:e.jsx(Ce,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Feedback"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Report glitches or suggest system upgrades."})]})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>o("bug"),className:`p-4 rounded-xl border text-left transition-all ${N==="bug"?"bg-red-950/40 border-red-500 text-red-400":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[e.jsx(Le,{size:18})," Bug Report"]}),e.jsx("p",{className:"text-xs opacity-80",children:"Something is broken."})]}),e.jsxs("button",{type:"button",onClick:()=>o("feature"),className:`p-4 rounded-xl border text-left transition-all ${N==="feature"?"bg-amber-950/40 border-amber-500 text-amber-400":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[e.jsx(_e,{size:18})," Feature Idea"]}),e.jsx("p",{className:"text-xs opacity-80",children:'"It would be cool if..."'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-2 ml-1",children:"Details"}),e.jsx("textarea",{value:S,onChange:h=>i(h.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-slate-200 focus:border-cyan-500 outline-none h-32",placeholder:"Describe...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 rounded-lg border border-slate-700 text-slate-400 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-2 rounded-lg font-bold shadow-lg transition-all",children:"Submit Feedback"})]})]})]}),p&&e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(de,{size:18,className:"text-purple-400"})," Admin Feedback Inbox"]}),e.jsx("div",{className:"space-y-3",children:k.length===0?e.jsx("p",{className:"text-slate-500 text-center py-4",children:"No reports."}):k.map(h=>e.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-4 rounded-xl flex flex-col sm:flex-row gap-4 justify-between items-start hover:border-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.type==="bug"?e.jsxs("span",{className:"text-xs font-bold bg-red-900/30 text-red-400 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Le,{size:12})," BUG"]}):e.jsxs("span",{className:"text-xs font-bold bg-amber-900/30 text-amber-400 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(_e,{size:12})," IDEA"]}),h.status==="Resolved"&&e.jsx("span",{className:"text-xs font-bold bg-green-900/30 text-green-400 px-2 py-1 rounded",children:"RESOLVED"}),e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:h.fullName})]}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mt-2",children:h.message})]}),e.jsxs("div",{className:"flex gap-2",children:[h.status!=="Resolved"&&e.jsx("button",{onClick:()=>C(h.id),className:"p-2 bg-green-900/20 text-green-500 rounded-lg hover:bg-green-900/40",title:"Mark Resolved",children:e.jsx(Lt,{size:16})}),e.jsx("button",{onClick:()=>D(h.id),className:"p-2 bg-slate-800 text-slate-500 rounded-lg hover:bg-red-900/20 hover:text-red-500",title:"Delete",children:e.jsx(qe,{size:16})})]})]},h.id))})]})]})}function et(){const[m,p]=r.useState(!0),[n,u]=r.useState({total:0,approved:0,pending:0,deptCounts:{},topEquipment:[]});r.useEffect(()=>{const o=G(V(z,"requests")),S=J(o,i=>{let k=0,v=0,E=0,C={},D={};i.forEach(g=>{const y=g.data();k++,(y.status==="Approved"||y.status==="Completed")&&v++,y.status==="Pending Review"&&E++,C[y.dept]=(C[y.dept]||0)+1,y.equipment&&(Array.isArray(y.equipment)?y.equipment:[y.equipment]).forEach(T=>{D[T]=(D[T]||0)+1})});const h=Object.entries(D).sort(([,g],[,y])=>y-g).slice(0,5);u({total:k,approved:v,pending:E,deptCounts:C,topEquipment:h}),p(!1)});return()=>S()},[]);const N=n.total>0?Math.round(n.approved/n.total*100):0;return e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(_t,{className:"text-emerald-400"})," Data Analytics"]})}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 px-4 py-2 rounded-lg text-cyan-400 font-mono text-sm",children:["Total Requests: ",e.jsx("strong",{children:n.total})]})]}),m?e.jsx("div",{className:"text-center py-12 text-slate-500 font-mono",children:"CALCULATING..."}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-950/30 rounded-xl p-5 border border-emerald-500/20",children:[e.jsx("h4",{className:"text-emerald-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Approval Rate"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("span",{className:"text-4xl font-bold text-emerald-400 font-mono",children:[N,"%"]})})]}),e.jsxs("div",{className:"bg-blue-950/30 rounded-xl p-5 border border-blue-500/20",children:[e.jsx("h4",{className:"text-blue-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Completed"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-blue-400 font-mono",children:n.approved})})]}),e.jsxs("div",{className:"bg-amber-950/30 rounded-xl p-5 border border-amber-500/20",children:[e.jsx("h4",{className:"text-amber-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Pending"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-amber-400 font-mono",children:n.pending})})]}),e.jsxs("div",{className:"md:col-span-2 bg-slate-950/50 rounded-xl border border-slate-800 p-5",children:[e.jsxs("h3",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(zt,{size:16,className:"text-purple-400"})," Requests by Department"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(n.deptCounts).sort(([,o],[,S])=>S-o).map(([o,S])=>{const i=S/n.total*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2 font-mono",children:[e.jsx("span",{className:"text-slate-400",children:o}),e.jsx("span",{className:"text-cyan-400",children:S})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${i}%`}})})]},o)})})]}),e.jsxs("div",{className:"bg-slate-950/50 rounded-xl border border-slate-800 p-5",children:[e.jsxs("h3",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(ue,{size:16,className:"text-pink-400"})," Top Gear"]}),e.jsx("ul",{className:"space-y-3",children:n.topEquipment.map(([o,S],i)=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-slate-800 text-cyan-400 flex items-center justify-center text-xs font-mono border border-slate-700",children:i+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 truncate",children:o.replace(" *","")}),e.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[S," uses"]})]})]},o))})]})]})]})})}function tt({currentUser:m}){const[p,n]=r.useState([]),[u,N]=r.useState(!0);r.useEffect(()=>{if(!m)return;const i=G(V(z,"requests"),Q("email","==",m.email),ie("createdAt","desc")),k=J(i,v=>{const E=v.docs.map(C=>({id:C.id,...C.data(),formattedDate:C.data().createdAt?.toDate().toLocaleDateString()||"N/A"}));n(E),N(!1)});return()=>k()},[m]);const o=async i=>{window.confirm("Are you sure?")&&await W(B(z,"requests",i))},S=i=>{const k={Approved:"bg-green-950/50 text-green-400 border-green-500/30",Denied:"bg-red-950/50 text-red-400 border-red-500/30",Completed:"bg-slate-800 text-slate-400 border-slate-700",default:"bg-amber-950/50 text-amber-400 border-amber-500/30"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border ${k[i]||k.default}`,children:i})};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"bg-slate-950/50 border-b border-slate-800 p-6",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(we,{className:"text-cyan-400"})," My Request History"]})}),e.jsx("div",{className:"overflow-x-auto",children:u?e.jsx("div",{className:"p-8 text-center text-slate-500 font-mono",children:"LOADING DATA..."}):p.length===0?e.jsx("div",{className:"p-12 text-center text-slate-500",children:"No records found."}):e.jsxs("table",{className:"w-full text-left border-collapse min-w-[700px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800/50 border-b border-slate-700 text-xs uppercase text-slate-400 font-mono",children:[e.jsx("th",{className:"p-4",children:"Ref ID"}),e.jsx("th",{className:"p-4",children:"Dept"}),e.jsx("th",{className:"p-4",children:"Project"}),e.jsx("th",{className:"p-4",children:"Date Submitted"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:p.map(i=>e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"p-4 text-cyan-400 font-mono text-xs",children:i.displayId}),e.jsx("td",{className:"p-4 text-slate-300 text-sm capitalize",children:i.dept}),e.jsx("td",{className:"p-4 font-semibold text-white text-sm",children:i.title}),e.jsx("td",{className:"p-4 text-slate-400 text-sm font-mono",children:i.formattedDate}),e.jsx("td",{className:"p-4",children:S(i.status)}),e.jsx("td",{className:"p-4",children:i.status==="Pending Review"&&e.jsx("button",{onClick:()=>o(i.id),className:"text-xs text-red-400 border border-red-900 hover:bg-red-950/50 px-3 py-1 rounded transition-colors",children:"Cancel"})})]},i.id))})]})})]})}function st({adminMode:m,blackouts:p}){const[n,u]=r.useState(new Date),[N,o]=r.useState(null),[S,i]=r.useState("all"),[k,v]=r.useState([]),[E,C]=r.useState(!0),D=()=>u(new Date(n.setMonth(n.getMonth()+1))),h=()=>u(new Date(n.setMonth(n.getMonth()-1)));r.useEffect(()=>{const t=G(V(z,"requests")),l=J(t,q=>{const U=q.docs.map(f=>{const w=f.data();let _=w.eventDate||w.checkoutDate||w.pickupDate||w.deadline;if(!_)return null;const[O,ne,H]=_.split("-").map(Number),oe=new Date(O,ne-1,H);return{id:f.id,title:w.title||w.requestName||"Request",displayId:w.displayId,dept:w.dept,type:w.requestType==="checkout"||w.dept==="Graphic"?"checkout":"event",status:w.status,date:oe,...w}}).filter(f=>f!==null&&f.status==="Approved");v(U),C(!1)});return()=>l()},[]);const g=async t=>{const q=new Date(n.getFullYear(),n.getMonth(),t).toISOString().split("T")[0];if(m){p.includes(q)?window.confirm(`Re-open ${q}?`)&&await W(B(z,"blackout_dates",q)):window.confirm(`Blackout ${q}?`)&&await ce(B(z,"blackout_dates",q),{reason:"Closed"});return}o(N===t?null:t)},y=t=>{const l=t.getFullYear(),q=t.getMonth(),U=new Date(l,q+1,0).getDate(),f=new Date(l,q,1).getDay();return{days:U,firstDay:f,monthName:t.toLocaleString("default",{month:"long"}),year:l}},{days:R,firstDay:T,monthName:x,year:d}=y(n),b=Array.from({length:R},(t,l)=>l+1),a=Array.from({length:T},(t,l)=>l),s=t=>k.filter(l=>l.date.getDate()===t&&l.date.getMonth()===n.getMonth()&&l.date.getFullYear()===n.getFullYear()&&(S==="all"||l.dept===S)),c=t=>{const l="https://calendar.google.com/calendar/render?action=TEMPLATE",q=`&text=${encodeURIComponent(`[${t.dept}] ${t.title}`)}`,U=`&details=${encodeURIComponent(`Ref: ${t.displayId}
Requested by: ${t.fullName}
Role: ${t.role}
Details: ${t.details||t.brief||t.description||"N/A"}`)}`,f=`&location=${encodeURIComponent(t.location||"Salpointe Catholic High School")}`,w=t.date.getFullYear(),_=String(t.date.getMonth()+1).padStart(2,"0"),O=String(t.date.getDate()).padStart(2,"0"),ne=`${w}${_}${O}`,H=new Date(t.date);H.setDate(H.getDate()+1);const oe=H.getFullYear(),ct=String(H.getMonth()+1).padStart(2,"0"),dt=String(H.getDate()).padStart(2,"0"),xt=`${oe}${ct}${dt}`,ut=`&dates=${ne}/${xt}`;return`${l}${q}${ut}${U}${f}`};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-slate-950/50 p-6 border-b border-slate-800 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[e.jsx("button",{onClick:h,className:"p-1 hover:bg-slate-800 rounded-full transition-colors text-cyan-400",children:e.jsx(Ot,{size:24})}),e.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-white",children:[x," ",e.jsx("span",{className:"text-slate-500",children:d})]}),e.jsx("button",{onClick:D,className:"p-1 hover:bg-slate-800 rounded-full transition-colors text-cyan-400",children:e.jsx(Ft,{size:24})})]})}),e.jsx("div",{className:"flex bg-slate-800/50 rounded-lg p-1 w-full md:w-auto overflow-x-auto",children:["all",j.FILM,j.PHOTO,j.CULINARY].map(t=>e.jsx("button",{onClick:()=>i(t),className:`flex-1 md:flex-none px-3 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-medium transition-all whitespace-nowrap capitalize ${S===t?"bg-cyan-600 text-white shadow-[0_0_10px_rgba(8,145,178,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-700"}`,children:t==="all"?"All":t},t))})]}),e.jsxs("div",{className:"p-6",children:[m&&e.jsxs("div",{className:"mb-4 p-3 bg-slate-800/50 border border-slate-700 rounded text-xs text-slate-400 flex items-center gap-2 font-mono",children:[e.jsx(ze,{size:14,className:"text-red-400"})," Admin Mode: Click a date to toggle blackout."]}),e.jsx("div",{className:"overflow-x-auto pb-2",children:E?e.jsx("div",{className:"text-center py-8 text-slate-500 font-mono",children:"LOADING MATRIX..."}):e.jsxs("div",{className:"min-w-[600px] md:min-w-0 grid grid-cols-7 gap-px bg-slate-800 border border-slate-800 rounded-xl overflow-hidden shadow-inner",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"bg-slate-900 p-2 text-center text-xs font-bold text-slate-500 uppercase tracking-wider",children:t},t)),a.map(t=>e.jsx("div",{className:"bg-slate-950/50 min-h-[80px] md:min-h-[100px]"},`empty-${t}`)),b.map(t=>{const l=s(t),q=t===new Date().getDate()&&n.getMonth()===new Date().getMonth()&&n.getFullYear()===new Date().getFullYear(),U=new Date(d,n.getMonth(),t).toISOString().split("T")[0],f=p.includes(U);return e.jsxs("div",{className:`min-h-[80px] md:min-h-[100px] p-1 md:p-2 border-t border-slate-800 relative group cursor-pointer transition-colors ${f?"bg-slate-900/30":"bg-slate-950/50"} ${N===t?"bg-cyan-900/20 border-cyan-500/30":"hover:bg-slate-900"}`,onClick:()=>g(t),children:[e.jsx("span",{className:`text-xs md:text-sm font-medium inline-block w-6 h-6 md:w-7 md:h-7 leading-6 md:leading-7 text-center rounded-full mb-1 ${q?"bg-red-600 text-white shadow-[0_0_10px_rgba(220,38,38,0.5)]":"text-slate-400"}`,children:t}),f?e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(ze,{className:"text-red-900/50",size:20})}):e.jsx("div",{className:"space-y-1",children:l.map(w=>e.jsx("div",{className:`text-[10px] md:text-xs p-1 rounded border truncate ${w.type==="checkout"?"bg-cyan-950/50 text-cyan-400 border-cyan-800/50":"bg-emerald-950/50 text-emerald-400 border-emerald-800/50"}`,children:w.title},w.id))})]},t)})]})}),N&&!p.includes(new Date(d,n.getMonth(),N).toISOString().split("T")[0])&&e.jsxs("div",{className:"mt-6 p-4 bg-slate-900/50 rounded-xl border border-slate-800 animate-fade-in",children:[e.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(X,{size:16,className:"text-cyan-400"})," ",x," ",N]}),s(N).length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Sector clear. No events."}):e.jsx("div",{className:"space-y-3",children:s(N).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-3 rounded-lg border border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-200 text-sm",children:t.title}),e.jsxs("p",{className:"text-xs text-slate-400 uppercase",children:[t.dept," • ",t.fullName]})]}),e.jsx("a",{href:c(t),target:"_blank",rel:"noopener noreferrer",className:"bg-slate-700 hover:bg-slate-600 p-2 rounded text-white transition-colors",children:e.jsx(Ut,{size:16})})]},t.id))})]})]})]})}function at({adminMode:m,setAdminMode:p,ALLOWED_ADMINS:n}){const[u,N]=r.useState([]),[o,S]=r.useState("all"),[i,k]=r.useState(!0),[v,E]=r.useState(null),[C,D]=r.useState("");r.useEffect(()=>{const x=G(V(z,"requests"),ie("createdAt","desc")),d=J(x,b=>{const a=b.docs.map(s=>({id:s.id,...s.data(),formattedDate:s.data().createdAt?.toDate().toLocaleDateString()||"N/A"}));N(a),k(!1)});return()=>d()},[]);const h=async(x,d)=>{window.confirm(`Confirm status change to: ${d}?`)&&(await ye(B(z,"requests",x.id),{status:d}),v&&v.id===x.id&&E(b=>({...b,status:d})),he({to_name:x.fullName,to_email:x.email,subject:`Request Update: ${x.title}`,title:x.title,status:d,message:`Status updated to ${d}.`}))},g=async x=>{window.confirm("Delete this record permanently?")&&(await W(B(z,"requests",x)),v&&v.id===x&&E(null))},y=()=>{const x=["ID","Department","Title","User","Email","Date Submitted","Status","Details"],d=u.map(c=>[c.displayId,c.dept,`"${c.title}"`,c.fullName,c.email,c.formattedDate,c.status,`"${(c.details||c.brief||c.description||"").replace(/"/g,'""')}"`]),b="data:text/csv;charset=utf-8,"+[x.join(","),...d.map(c=>c.join(","))].join(`
`),a=encodeURI(b),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","cte_requests_export.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},R=u.filter(x=>{const d=o==="all"?!0:x.dept?.toLowerCase().includes(o.toLowerCase()),b=C.toLowerCase(),a=x.title?.toLowerCase().includes(b)||x.fullName?.toLowerCase().includes(b)||x.displayId?.toLowerCase().includes(b)||x.email?.toLowerCase().includes(b);return d&&a}),T=x=>{switch(x){case"Approved":return"bg-green-950/50 text-green-400 border-green-500/30";case"Denied":return"bg-red-950/50 text-red-400 border-red-500/30";case"Completed":return"bg-slate-800 text-slate-400 border-slate-700";default:return"bg-amber-950/50 text-amber-400 border-amber-500/30"}};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl relative",children:[v&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-start sticky top-0 bg-slate-900 z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Data Packet"}),e.jsxs("div",{className:"flex gap-3 text-xs text-cyan-500 font-mono mt-1",children:[e.jsxs("span",{children:["ID: ",v.displayId||"N/A"]}),e.jsxs("span",{className:"opacity-50",children:["| Ref: ",v.id]})]})]}),e.jsx("button",{onClick:()=>E(null),className:"text-slate-400 hover:text-white hover:bg-slate-800 p-2 rounded-full transition-colors",children:e.jsx(ee,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Sector"}),e.jsx("p",{className:"font-semibold text-white capitalize",children:v.dept})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border ${T(v.status)}`,children:v.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Operative"}),e.jsx("p",{className:"text-slate-200",children:v.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Comm Link"}),e.jsx("p",{className:"text-slate-200 font-mono text-sm",children:v.email})]})]}),e.jsxs("div",{className:"border-t border-slate-800 pt-4",children:[e.jsxs("h4",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(xe,{size:16,className:"text-cyan-500"})," Mission Details"]}),e.jsx("div",{className:"bg-slate-950/50 rounded-lg p-4 space-y-4 border border-slate-800",children:Object.entries(v).map(([x,d])=>["id","dept","status","fullName","email","role","formattedDate","createdAt","title","requestName","displayId"].includes(x)?null:Array.isArray(d)?e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:x}),e.jsx("ul",{className:"list-disc list-inside text-sm text-slate-300 bg-slate-900 p-2 rounded border border-slate-800",children:d.map((b,a)=>e.jsx("li",{children:b},a))})]},x):e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:x.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-slate-300 text-sm whitespace-pre-wrap",children:d})]},x))})]}),m&&e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"font-bold text-slate-400 mb-3 text-xs uppercase tracking-wide",children:"Command Actions"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(v,"Approved"),className:"flex-1 py-2 bg-green-900/30 text-green-400 border border-green-900 hover:bg-green-900/50 rounded text-sm font-medium transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>h(v,"Denied"),className:"flex-1 py-2 bg-red-900/30 text-red-400 border border-red-900 hover:bg-red-900/50 rounded text-sm font-medium transition-colors",children:"Deny"})]})]})]})]})}),e.jsxs("div",{className:"bg-slate-950/50 border-b border-slate-800 p-4 md:p-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-white",children:[e.jsx(de,{className:"text-purple-400"})," Request Log"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Live Database Feed"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 lg:w-64",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search database...",className:"w-full bg-slate-900 text-white border border-slate-700 rounded-lg pl-9 pr-4 py-2 text-sm focus:outline-none focus:border-cyan-500 placeholder-slate-600",value:C,onChange:x=>D(x.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"bg-slate-900 text-white border border-slate-700 rounded-lg px-4 py-2 text-sm focus:border-cyan-500 outline-none",value:o,onChange:x=>S(x.target.value),children:[e.jsx("option",{value:"all",children:"All Sectors"}),e.jsx("option",{value:"film",children:"Film"}),e.jsx("option",{value:"graphic",children:"Graphic"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"culinary",children:"Culinary"}),e.jsx("option",{value:"photo",children:"Photo"})]}),m&&e.jsxs("button",{onClick:y,className:"bg-emerald-900/30 hover:bg-emerald-900/50 text-emerald-400 border border-emerald-900 px-3 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",title:"Download CSV",children:[e.jsx($t,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:i?e.jsx("div",{className:"p-8 text-center text-slate-500 font-mono",children:"INITIALIZING STREAM..."}):e.jsxs("table",{className:"w-full text-left border-collapse min-w-[700px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50 border-b border-slate-800 text-xs uppercase text-slate-500 font-mono",children:[e.jsx("th",{className:"p-4",children:"ID Code"}),e.jsx("th",{className:"p-4",children:"Sector"}),e.jsx("th",{className:"p-4",children:"Objective"}),e.jsx("th",{className:"p-4",children:"Agent"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"View"}),m&&e.jsx("th",{className:"p-4",children:"Override"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:R.map(x=>e.jsxs("tr",{className:"hover:bg-slate-800/40 transition-colors",children:[e.jsx("td",{className:"p-4 text-cyan-600 font-mono text-xs",children:x.displayId}),e.jsx("td",{className:"p-4 text-slate-400 text-sm capitalize",children:x.dept}),e.jsx("td",{className:"p-4 text-white font-medium text-sm",children:x.title}),e.jsx("td",{className:"p-4 text-slate-400 text-sm",children:x.fullName}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border ${T(x.status)}`,children:x.status})}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>E(x),className:"text-slate-500 hover:text-cyan-400 p-2 transition-colors",children:e.jsx(Pt,{size:20})})}),m&&e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsx("button",{onClick:()=>h(x,"Approved"),className:"p-1 bg-green-900/20 text-green-500 rounded hover:bg-green-900/40",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>h(x,"Denied"),className:"p-1 bg-red-900/20 text-red-500 rounded hover:bg-red-900/40",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>g(x.id),className:"p-1 bg-slate-800 text-slate-500 rounded hover:bg-slate-700",children:e.jsx("span",{className:"font-mono text-xs font-bold px-1",children:"DEL"})})]})]},x.id))})]})})]})}function K({title:m,icon:p,colorClass:n,children:u,setSubmitted:N,initialData:o={},onCancel:S,currentUser:i,blackouts:k=[]}){const v=r.useRef(null),E=Y(m),[C,D]=r.useState(!1),h=()=>{const d=new FormData(v.current),b={};for(const[a,s]of d.entries())b[a]?(Array.isArray(b[a])||(b[a]=[b[a]]),b[a].push(s)):b[a]=s;return localStorage.setItem(E,JSON.stringify(b)),!0},g=d=>{d.preventDefault(),h(),alert("Draft secured in local cache.")},y=()=>{D(!0)},R=()=>{h(),D(!1),S()},T=()=>{localStorage.removeItem(E),D(!1),S()},x=async d=>{d.preventDefault();const b=new FormData(d.target),a={};for(const[t,l]of b.entries())a[t]?(Array.isArray(a[t])||(a[t]=[a[t]]),a[t].push(l)):a[t]=l;const s=["checkoutDate","returnDate","eventDate","pickupDate","deadline"];let c=!1;if(s.forEach(t=>{a[t]&&k.includes(a[t])&&(c=!0)}),c){alert("Date blocked by admin protocol. Select alternative.");return}try{const t=Date.now().toString().slice(-4),l=Math.floor(1e3+Math.random()*9e3),q=`REQ-${t}-${l}`;await ve(V(z,"requests"),{...a,dept:m,displayId:q,status:"Pending Review",createdAt:new Date,title:a.requestName||a.eventName||a.projectType||a.businessName||"New Request"}),he({to_name:"Admin",to_email:"erivers@salpointe.org",subject:`New Request: ${a.requestName}`,title:a.requestName,status:"Pending Review",message:`New request (${q}) from ${a.fullName}.`}),localStorage.removeItem(E),N(!0)}catch(t){console.error(t),alert("Transmission error.")}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-slate-900/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-800 overflow-hidden relative",children:[C&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-slate-700 max-w-md w-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-900/20 rounded-full flex items-center justify-center mx-auto mb-4 text-amber-500 border border-amber-500/20",children:e.jsx(Gt,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Unsaved Data Detected"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Secure local draft before termination?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:R,className:"w-full bg-cyan-600 text-white py-3 rounded-lg font-semibold hover:bg-cyan-500 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(8,145,178,0.3)]",children:[e.jsx(Z,{size:18})," Secure Draft & Exit"]}),e.jsx("button",{onClick:T,className:"w-full bg-transparent border border-red-900/50 text-red-400 py-3 rounded-lg font-semibold hover:bg-red-950/30 hover:border-red-500 transition-all",children:"Purge Data & Exit"}),e.jsx("button",{onClick:()=>D(!1),className:"w-full text-slate-500 py-2 hover:text-slate-300 text-sm",children:"Return to Editor"})]})]})}),e.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent opacity-50"}),e.jsxs("div",{className:"p-5 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 md:mb-8 pb-4 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-slate-800 border border-slate-700 ${n.replace("bg-","text-")}`,children:e.jsx(p,{size:28})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white tracking-wide",children:[m," Protocol"]}),e.jsx("p",{className:"text-slate-500 text-xs md:text-sm font-mono uppercase",children:"Input Required Data"})]})]}),e.jsx("button",{type:"button",onClick:y,className:"text-slate-500 hover:text-white hover:bg-slate-800 p-2 rounded-full transition-colors",children:e.jsx(ee,{size:24})})]}),e.jsxs("form",{ref:v,onSubmit:x,children:[e.jsx(We,{initialData:o,currentUser:i}),u,e.jsxs("div",{className:"mt-8 flex flex-col-reverse sm:flex-row justify-end gap-3 pt-6 border-t border-slate-800",children:[e.jsx("button",{type:"button",onClick:y,className:"flex items-center justify-center gap-2 bg-transparent border border-slate-700 text-slate-400 px-6 py-3 rounded-lg font-semibold hover:bg-slate-800 hover:text-white transition-all",children:"Abort"}),e.jsxs("button",{type:"button",onClick:g,className:"flex items-center justify-center gap-2 bg-slate-800 border border-slate-700 text-cyan-400 px-6 py-3 rounded-lg font-semibold hover:bg-slate-700 hover:border-cyan-500/50 transition-all",children:[e.jsx(Z,{size:18})," Save Draft"]}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-cyan-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-cyan-500 transition-all shadow-[0_0_20px_rgba(8,145,178,0.4)] tracking-wide",children:"INITIALIZE REQUEST"})]})]})]})]})}function rt({setSubmitted:m,onCancel:p,currentUser:n,inventory:u,blackouts:N}){const o="Film",S=Y(o),i=JSON.parse(localStorage.getItem(S)||"{}"),[k,v]=r.useState(i.requestType||"checkout"),[E,C]=r.useState({}),[D,h]=r.useState(!1),[g,y]=r.useState({start:i.checkoutDate||"",end:i.returnDate||""}),R=d=>{const b={...g,[d.target.name==="checkoutDate"?"start":"end"]:d.target.value};y(b)};r.useEffect(()=>{(async()=>{if(!g.start||!g.end||k!=="checkout"){h(!1);return}h(!0);const b=G(V(z,"requests"),Q("dept","==","Film"),Q("requestType","==","checkout")),a=await Ne(b),s={};a.forEach(t=>{const l=t.data();if(l.status==="Denied"||l.status==="Completed")return;const q=l.checkoutDate,U=l.returnDate;q<=g.end&&U>=g.start&&l.equipment&&(Array.isArray(l.equipment)?l.equipment:[l.equipment]).forEach(w=>{s[w]=(s[w]||0)+1})});const c={};Object.keys(u).forEach(t=>{(u[t].category==="film"||u[t].category==="general")&&(c[t]=Math.max(0,u[t].count-(s[t]||0)))}),C(c)})()},[g,k,u]);const T=g.start&&g.end&&g.start===g.end,x=Object.entries(u).filter(([d,b])=>b.category==="film"||b.category==="general").sort((d,b)=>d[0].localeCompare(b[0]));return e.jsxs(K,{title:o,icon:Ee,colorClass:"bg-blue-600",setSubmitted:m,initialData:i,onCancel:p,currentUser:n,blackouts:N,children:[e.jsx("input",{type:"hidden",name:"requestType",value:k}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-2 ml-1",children:"Operation Type"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>v("checkout"),className:`p-4 rounded-xl border text-center transition-all duration-300 flex flex-col items-center justify-center gap-2 ${k==="checkout"?"bg-cyan-950/40 border-cyan-500 text-cyan-400 shadow-[0_0_15px_rgba(8,145,178,0.2)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsx(Oe,{size:24}),e.jsx("span",{className:"font-bold",children:"Equipment Checkout"})]}),e.jsxs("button",{type:"button",onClick:()=>v("service"),className:`p-4 rounded-xl border text-center transition-all duration-300 flex flex-col items-center justify-center gap-2 ${k==="service"?"bg-cyan-950/40 border-cyan-500 text-cyan-400 shadow-[0_0_15px_rgba(8,145,178,0.2)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsx(Vt,{size:24}),e.jsx("span",{className:"font-bold",children:"Production Team"})]})]})]}),k==="checkout"?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-500/30 text-sm text-blue-200 flex items-start gap-3",children:[e.jsx(Fe,{className:"shrink-0 mt-0.5 text-blue-400",size:16}),e.jsxs("p",{children:[e.jsx("strong",{children:"Protocol:"})," Equipment return deadline is 0800 hours the following school day."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Checkout Date"}),e.jsx("input",{name:"checkoutDate",defaultValue:i.checkoutDate,onChange:R,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Return Date"}),e.jsx("input",{name:"returnDate",defaultValue:i.returnDate,onChange:R,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",required:!0})]})]}),T&&e.jsxs("div",{className:"animate-fade-in bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("label",{className:"block text-xs font-mono text-cyan-400 uppercase mb-1",children:"Specific Duration"}),e.jsxs("select",{name:"durationHours",defaultValue:i.durationHours,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",children:[e.jsx("option",{value:"",children:"Select Duration..."}),e.jsx("option",{value:"1 Hour",children:"1 Hour"}),e.jsx("option",{value:"2 Hours",children:"2 Hours"}),e.jsx("option",{value:"Full Day (School Hours)",children:"Full Day"}),e.jsx("option",{value:"Overnight",children:"Overnight"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-3 ml-1",children:["Select Assets ",e.jsx("span",{className:"text-red-500 ml-2 normal-case tracking-normal",children:"* Certification Required"})]}),D?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(([d,b])=>{const a=E[d]!==void 0?E[d]:99,s=a<=0,c=d.replace(" *","").replace("*","");return e.jsxs("label",{className:`flex items-center space-x-3 p-3 border rounded-lg transition-all duration-200 ${s?"bg-slate-900/50 border-slate-800 opacity-50 cursor-not-allowed":"bg-slate-900 border-slate-800 hover:border-cyan-500/50 hover:shadow-[0_0_10px_rgba(8,145,178,0.1)] cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",name:"equipment",value:d,disabled:s,defaultChecked:i.equipment?.includes(d),className:"w-5 h-5 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500 bg-slate-800"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-slate-200 text-sm block font-medium",children:[c," ",b.requiresTraining&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("span",{className:`text-[10px] font-mono uppercase tracking-wider ${s?"text-red-500":"text-emerald-500"}`,children:s?"OFFLINE / UNAVAILABLE":`${a} UNITS ACTIVE`})]})]},d)})}):e.jsxs("div",{className:"p-6 bg-slate-900/50 border border-slate-800 rounded-xl text-center text-slate-500 text-sm border-dashed",children:[e.jsx(X,{className:"inline-block mr-2 w-4 h-4 mb-1"}),"Select dates above to initialize inventory check."]})]}),e.jsx("div",{className:"mt-6 p-4 bg-slate-900 border border-slate-800 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",required:!0,className:"mt-1 w-5 h-5 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500 bg-slate-800"}),e.jsxs("span",{className:"text-xs text-slate-400 leading-relaxed",children:[e.jsx("strong",{children:"LIABILITY WAIVER:"})," By initializing this request, I accept full financial responsibility for equipment repair or replacement at market value in the event of damage, loss, or theft during my checkout period."]})]})})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Event Date"}),e.jsx("input",{name:"eventDate",defaultValue:i.eventDate,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Start Time"}),e.jsx("input",{name:"startTime",defaultValue:i.startTime,type:"time",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Service Required"}),e.jsxs("select",{name:"serviceType",defaultValue:i.serviceType,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",children:[e.jsx("option",{children:"Live Broadcast (Stream)"}),e.jsx("option",{children:"Event Recording (Edited later)"}),e.jsx("option",{children:"Raw Footage Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Mission Details"}),e.jsx("textarea",{name:"details",defaultValue:i.details,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none h-24",placeholder:"Describe specific shots, locations, or requirements..."})]})]})]})}function lt({setSubmitted:m,onCancel:p,currentUser:n}){const u="Graphic",N=Y(u),o=JSON.parse(localStorage.getItem(N)||"{}");return e.jsx(K,{title:u,icon:Ie,colorClass:"bg-purple-600",setSubmitted:m,initialData:o,onCancel:p,currentUser:n,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Project Type"}),e.jsxs("select",{name:"projectType",defaultValue:o.projectType,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-purple-500 outline-none",children:[e.jsx("option",{children:"Event Poster / Flyer"}),e.jsx("option",{children:"Logo Design"}),e.jsx("option",{children:"Website Design"}),e.jsx("option",{children:"T-Shirt / Merch"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Dimensions"}),e.jsx("input",{name:"dimensions",defaultValue:o.dimensions,type:"text",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-purple-500 outline-none",placeholder:"e.g., 11x17"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Deadline"}),e.jsx("input",{name:"deadline",defaultValue:o.deadline,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-purple-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Creative Brief"}),e.jsx("textarea",{name:"brief",defaultValue:o.brief,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-purple-500 outline-none h-32",placeholder:"Text content, colors, inspiration...",required:!0})]})]})})}function nt({setSubmitted:m,onCancel:p,currentUser:n}){const u="Business",N=Y(u),o=JSON.parse(localStorage.getItem(N)||"{}");return e.jsx(K,{title:u,icon:xe,colorClass:"bg-emerald-600",setSubmitted:m,initialData:o,onCancel:p,currentUser:n,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Support Required"}),e.jsxs("select",{name:"assistanceType",defaultValue:o.assistanceType,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-emerald-500 outline-none",children:[e.jsx("option",{children:"Business Plan Review"}),e.jsx("option",{children:"Financial Modeling Help"}),e.jsx("option",{children:"Marketing Strategy"}),e.jsx("option",{children:"General Mentorship"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Concept Overview"}),e.jsx("textarea",{name:"description",defaultValue:o.description,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-emerald-500 outline-none h-40",placeholder:"Briefly describe your product or service...",required:!0})]})]})})}function ot({setSubmitted:m,onCancel:p,currentUser:n}){const u="Culinary",N=Y(u),o=JSON.parse(localStorage.getItem(N)||"{}");return e.jsx(K,{title:u,icon:Re,colorClass:"bg-orange-500",setSubmitted:m,initialData:o,onCancel:p,currentUser:n,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Event Date"}),e.jsx("input",{name:"eventDate",defaultValue:o.eventDate,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-amber-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Serve Time"}),e.jsx("input",{name:"serveTime",defaultValue:o.serveTime,type:"time",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-amber-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Guest Count"}),e.jsx("input",{name:"guestCount",defaultValue:o.guestCount,type:"number",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-amber-500 outline-none",min:"1",placeholder:"50",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Service Style"}),e.jsxs("select",{name:"serviceStyle",defaultValue:o.serviceStyle,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-amber-500 outline-none",children:[e.jsx("option",{children:"Buffet Style"}),e.jsx("option",{children:"Boxed Lunches"}),e.jsx("option",{children:"Plated Service"}),e.jsx("option",{children:"Appetizers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Dietary Requirements"}),e.jsx("textarea",{name:"menuNotes",defaultValue:o.menuNotes,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-amber-500 outline-none h-24",placeholder:"Preferences, allergies, restrictions...",required:!0})]})]})})}function it({setSubmitted:m,onCancel:p,currentUser:n,inventory:u,blackouts:N}){const o="Photo",S=Y(o),i=JSON.parse(localStorage.getItem(S)||"{}"),[k,v]=r.useState(i.requestType||"service"),[E,C]=r.useState({}),[D,h]=r.useState(!1),[g,y]=r.useState({start:i.pickupDate||"",end:i.returnDate||""}),R=d=>{const b={...g,[d.target.name==="pickupDate"?"start":"end"]:d.target.value};y(b)};r.useEffect(()=>{(async()=>{if(!g.start||!g.end||k!=="checkout"){h(!1);return}h(!0);const b=G(V(z,"requests"),Q("dept","==","Photo"),Q("requestType","==","checkout")),a=await Ne(b),s={};a.forEach(t=>{const l=t.data();if(l.status==="Denied"||l.status==="Completed")return;const q=l.pickupDate,U=l.returnDate;q<=g.end&&U>=g.start&&l.equipment&&(Array.isArray(l.equipment)?l.equipment:[l.equipment]).forEach(w=>{s[w]=(s[w]||0)+1})});const c={};Object.keys(u).forEach(t=>{(u[t].category==="photo"||u[t].category==="general")&&(c[t]=Math.max(0,u[t].count-(s[t]||0)))}),C(c)})()},[g,k,u]);const T=g.start&&g.end&&g.start===g.end,x=Object.entries(u).filter(([d,b])=>b.category==="photo"||b.category==="general").sort((d,b)=>d[0].localeCompare(b[0]));return e.jsxs(K,{title:o,icon:ue,colorClass:"bg-pink-600",setSubmitted:m,initialData:i,onCancel:p,currentUser:n,blackouts:N,children:[e.jsx("input",{type:"hidden",name:"requestType",value:k}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-2 ml-1",children:"Operation Type"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>v("service"),className:`p-4 rounded-xl border text-center transition-all duration-300 flex flex-col items-center justify-center gap-2 ${k==="service"?"bg-pink-950/40 border-pink-500 text-pink-400 shadow-[0_0_15px_rgba(236,72,153,0.2)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsx(Bt,{size:24}),e.jsx("span",{className:"font-bold",children:"Event Coverage"})]}),e.jsxs("button",{type:"button",onClick:()=>v("checkout"),className:`p-4 rounded-xl border text-center transition-all duration-300 flex flex-col items-center justify-center gap-2 ${k==="checkout"?"bg-pink-950/40 border-pink-500 text-pink-400 shadow-[0_0_15px_rgba(236,72,153,0.2)]":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsx(Oe,{size:24}),e.jsx("span",{className:"font-bold",children:"Equipment Checkout"})]})]})]}),k==="checkout"?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-lg border border-pink-500/30 text-sm text-pink-200 flex items-start gap-3",children:[e.jsx(Fe,{className:"shrink-0 mt-0.5 text-pink-400",size:16}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requirement:"})," Advanced Photo I certification required for DSLR bodies."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Pickup Date"}),e.jsx("input",{name:"pickupDate",defaultValue:i.pickupDate,onChange:R,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Return Date"}),e.jsx("input",{name:"returnDate",defaultValue:i.returnDate,onChange:R,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",required:!0})]})]}),T&&e.jsxs("div",{className:"mb-4 animate-fade-in bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("label",{className:"block text-xs font-mono text-pink-400 uppercase mb-1",children:"Specific Duration"}),e.jsxs("select",{name:"durationHours",defaultValue:i.durationHours,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",children:[e.jsx("option",{value:"",children:"Select Duration..."}),e.jsx("option",{value:"1 Hour",children:"1 Hour"}),e.jsx("option",{value:"2 Hours",children:"2 Hours"}),e.jsx("option",{value:"Full Day (School Hours)",children:"Full Day"}),e.jsx("option",{value:"Overnight",children:"Overnight"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-3 ml-1",children:"Select Assets"}),D?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(([d,b])=>{const a=E[d]!==void 0?E[d]:99,s=a<=0,c=d.replace(" *","").replace("*","");return e.jsxs("label",{className:`flex items-center space-x-3 p-3 border rounded-lg transition-all duration-200 ${s?"bg-slate-900/50 border-slate-800 opacity-50 cursor-not-allowed":"bg-slate-900 border-slate-800 hover:border-pink-500/50 hover:shadow-[0_0_10px_rgba(236,72,153,0.1)] cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",name:"equipment",value:d,disabled:s,defaultChecked:i.equipment?.includes(d),className:"w-5 h-5 rounded border-slate-600 text-pink-600 focus:ring-pink-500 bg-slate-800"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-slate-200 text-sm block font-medium",children:[c," ",b.requiresTraining&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("span",{className:`text-[10px] font-mono uppercase tracking-wider ${s?"text-red-500":"text-emerald-500"}`,children:s?"OFFLINE / UNAVAILABLE":`${a} UNITS ACTIVE`})]})]},d)})}):e.jsxs("div",{className:"p-6 bg-slate-900/50 border border-slate-800 rounded-xl text-center text-slate-500 text-sm border-dashed",children:[e.jsx(X,{className:"inline-block mr-2 w-4 h-4 mb-1"}),"Select dates above to initialize inventory check."]})]}),e.jsx("div",{className:"mt-6 p-4 bg-slate-900 border border-slate-800 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",required:!0,className:"mt-1 w-5 h-5 rounded border-slate-600 text-pink-600 focus:ring-pink-500 bg-slate-800"}),e.jsxs("span",{className:"text-xs text-slate-400 leading-relaxed",children:[e.jsx("strong",{children:"LIABILITY WAIVER:"})," By initializing this request, I accept full financial responsibility for equipment repair or replacement at market value in the event of damage, loss, or theft during my checkout period."]})]})})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Event Date"}),e.jsx("input",{name:"eventDate",defaultValue:i.eventDate,type:"date",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Start Time"}),e.jsx("input",{name:"startTime",defaultValue:i.startTime,type:"time",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Location"}),e.jsx("input",{name:"location",defaultValue:i.location,type:"text",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none",placeholder:"e.g., Gym"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Specific Shots"}),e.jsx("textarea",{name:"shotList",defaultValue:i.shotList,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-pink-500 outline-none h-24",placeholder:"Key moments..."})]})]})]})}function je({onExit:m}){const p=r.useRef(null),[n,u]=r.useState("start"),[N,o]=r.useState(0),[S,i]=r.useState(parseInt(localStorage.getItem("lancer_highscore")||"0")),k=.6,v=-10,E=5,C=50,D=r.useRef({x:50,y:200,vy:0,width:40,height:40,isJumping:!1}),h=r.useRef([]),g=r.useRef(0),y=r.useRef(0),R=r.useRef(null),T=()=>{D.current.isJumping||(D.current.vy=v,D.current.isJumping=!0)},x=()=>{u("playing"),o(0),y.current=0,D.current={x:50,y:200,vy:0,width:40,height:40,isJumping:!1},h.current=[],g.current=0,d()},d=()=>{const a=p.current;if(!a)return;const s=a.getContext("2d");s.fillStyle="#0f172a",s.fillRect(0,0,a.width,a.height),s.strokeStyle="#22d3ee",s.lineWidth=2,s.beginPath(),s.moveTo(0,a.height-C),s.lineTo(a.width,a.height-C),s.stroke();const c=D.current;if(c.vy+=k,c.y+=c.vy,c.y>a.height-C-c.height&&(c.y=a.height-C-c.height,c.vy=0,c.isJumping=!1),s.font="32px Arial",s.fillText("🏇",c.x,c.y+32),g.current++,g.current%100===0){const t=Math.random()>.5?"📹":"F";h.current.push({x:a.width,y:a.height-C-30,width:30,height:30,type:t})}for(let t=h.current.length-1;t>=0;t--){const l=h.current[t];if(l.x-=E,s.fillStyle=l.type==="F"?"#ef4444":"#fbbf24",s.font="28px Arial",s.fillText(l.type,l.x,l.y+28),c.x<l.x+l.width&&c.x+c.width>l.x&&c.y<l.y+l.height&&c.y+c.height>l.y){b();return}l.x+l.width<0&&(h.current.splice(t,1),y.current+=10,o(y.current))}s.fillStyle="#fff",s.font="16px monospace",s.fillText(`SCORE: ${y.current}`,10,20),R.current=requestAnimationFrame(d)},b=()=>{cancelAnimationFrame(R.current),u("gameover"),y.current>S&&(i(y.current),localStorage.setItem("lancer_highscore",y.current.toString()))};return r.useEffect(()=>{const a=s=>{(s.code==="Space"||s.code==="ArrowUp")&&(n==="playing"?T():n!=="playing"&&x())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[n]),e.jsxs("div",{className:"max-w-3xl mx-auto bg-black border-4 border-slate-700 rounded-xl overflow-hidden font-mono shadow-2xl relative animate-fade-in select-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-10 pointer-events-none bg-[length:100%_2px,3px_100%]"}),e.jsxs("div",{className:"bg-slate-900 p-4 border-b-4 border-slate-700 flex justify-between items-center relative z-20",children:[e.jsxs("div",{className:"text-green-400 text-xs flex items-center gap-2",children:[e.jsx(De,{size:14})," LANCER_RUN.EXE"]}),e.jsxs("div",{className:"text-yellow-400 text-xs flex items-center gap-2",children:[e.jsx(Ae,{size:14})," HI-SCORE: ",S]}),e.jsx("button",{onClick:m,className:"text-red-500 hover:text-red-400 text-xs uppercase font-bold",children:"[ EXIT SYSTEM ]"})]}),e.jsxs("div",{className:"relative bg-slate-950",style:{height:"300px"},children:[e.jsx("canvas",{ref:p,width:700,height:300,className:"w-full h-full block"}),n==="start"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70 z-20",children:[e.jsx("h2",{className:"text-4xl font-bold text-cyan-400 mb-4 tracking-widest glitch-text",children:"LANCER RUN"}),e.jsx("p",{className:"text-slate-300 text-sm mb-6",children:"Space/Up to Jump. Avoid the F's!"}),e.jsx("button",{onClick:x,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded blink-anim",children:"INSERT COIN (START)"})]}),n==="gameover"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/40 z-20 backdrop-blur-sm",children:[e.jsx("h2",{className:"text-4xl font-bold text-red-500 mb-2",children:"CRITICAL FAILURE"}),e.jsxs("p",{className:"text-white text-xl mb-6",children:["FINAL SCORE: ",N]}),e.jsx("button",{onClick:x,className:"px-6 py-2 bg-white text-black font-bold rounded hover:bg-slate-200",children:"RETRY MISSION"})]})]})]})}};pt.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Kt,{})}));
