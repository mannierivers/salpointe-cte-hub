import{r as l,j as e,e as xt,c as mt}from"./vendor-BraaEMZl.js";import{i as ut,g as bt,a as pt,G as ht,o as gt,q as G,c as U,b as Y,d as re,w as ft,e as P,f as jt,s as le,h as Nt,j as vt,k as Q,u as fe,l as je}from"./firebase-D8qRO9Il.js";import{L as Ne,A as yt,C as ve,H as ye,a as ne,b as wt,S as we,c as Se,M as ke,Z as St,F as kt,d as Ct,e as Dt,f as At,V as Ce,P as De,B as oe,U as Ae,g as ie,h as K,R as It,i as Et,j as Ie,k as Ee,T as Re,l as Te,m as Le,n as Rt,o as Tt,p as Lt,q as _t,r as qt,s as _e,t as zt,X as ce,u as Ft,D as Mt,E as $t,v as Ot,G as Pt,w as Ut,x as Bt,y as Gt}from"./icons-Dtve54ml.js";(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))_(w);new MutationObserver(w=>{for(const z of w)if(z.type==="childList")for(const $ of z.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&_($)}).observe(document,{childList:!0,subtree:!0});function J(w){const z={};return w.integrity&&(z.integrity=w.integrity),w.referrerPolicy&&(z.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?z.credentials="include":w.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function _(w){if(w.ep)return;w.ep=!0;const z=J(w);fetch(w.href,z)}})();const Yt={apiKey:"AIzaSyBrhttq9MepUX3ixZKbRvASR7BdjPVqugY",authDomain:"salpointe-cte-hub.firebaseapp.com",projectId:"salpointe-cte-hub",storageBucket:"salpointe-cte-hub.appspot.com",messagingSenderId:"462271958444",appId:"1:462271958444:web:78ee9c184dd9985fa0be09"},$e=ut(Yt),L=bt($e),de=pt($e),Vt=new ht,qe="/assets/SC-LOGO-RGB-1tQQU51o.png",xe={SERVICE_ID:"service_dp1gjh1",TEMPLATE_ID:"template_kyo4h1e",PUBLIC_KEY:"CZo6tBrAGwmjLwTr6"},ze=["krashka@salpointe.org","jelias@salpointe.org","cneff@salpointe.org","vdunk@salpointe.org","amartin@salpointe.org","jharris@salpointe.org","lsaulsby@salpointe.org","cjones@salpointe.org","cbarry@salpointe.org","erivers@salpointe.org"],me={"Cinema Camera Kit":{count:1,category:"film",requiresTraining:!0},"Gimbal / Stabilizer":{count:6,category:"film",requiresTraining:!0},"DJI Mic Kit (Wireless)":{count:4,category:"film",requiresTraining:!1},"DJI Flip Drone":{count:1,category:"film",requiresTraining:!0},"Lighting Kit":{count:6,category:"film",requiresTraining:!1},Tripod:{count:8,category:"general",requiresTraining:!1},"DSLR Camera Body":{count:6,category:"photo",requiresTraining:!0},"Zoom Lens (18-55mm)":{count:6,category:"photo",requiresTraining:!1},"Telephoto Lens (70-200mm)":{count:2,category:"photo",requiresTraining:!1},"Portrait Lens (50mm)":{count:3,category:"photo",requiresTraining:!1},"SD Card Reader":{count:5,category:"photo",requiresTraining:!1},"Flash Unit":{count:3,category:"photo",requiresTraining:!1},"Serving Trays":{count:10,category:"culinary",requiresTraining:!1},"Chafing Dishes":{count:4,category:"culinary",requiresTraining:!1}},i={LANDING:"landing",DASHBOARD:"dashboard",FILM:"film",GRAPHIC:"graphic",BUSINESS:"business",CULINARY:"culinary",PHOTO:"photo",CALENDAR:"calendar",QUEUE:"queue",MY_REQUESTS:"my_requests",ANALYTICS:"analytics",INVENTORY:"inventory",FEEDBACK:"feedback",GAME:"game"},Fe=g=>`salpointe_draft_${g}`,ue=g=>{xt.send(xe.SERVICE_ID,xe.TEMPLATE_ID,g,xe.PUBLIC_KEY).then(E=>console.log("EMAIL SUCCESS!",E.status,E.text),E=>console.log("EMAIL FAILED...",E))},Me=g=>{if(!g||!g.toDate)return"N/A";try{return g.toDate().toLocaleDateString()}catch{return"Invalid Date"}},Ht=()=>{const[g,E]=l.useState("landing"),[J,_]=l.useState(!1),[w,z]=l.useState(null),[$,W]=l.useState(!1),[Z,X]=l.useState(me),[ee,Oe]=l.useState([]),[Pe,be]=l.useState(0);l.useEffect(()=>{const s=gt(de,d=>{d?(z(d),W(ze.includes(d.email))):(z(null),W(!1))});return()=>s()},[]),l.useEffect(()=>{(async()=>{const f=P(L,"settings","inventory_v2"),p=await jt(f);p.exists()?X(p.data()):(await le(f,me),X(me))})();const d=G(U(L,"blackout_dates")),a=Y(d,f=>{const p=f.docs.map(c=>c.id);Oe(p)});return()=>a()},[]);const pe=async()=>{try{await vt(de,Vt),E(i.DASHBOARD)}catch(s){console.error("Login failed:",s),alert("Login failed.")}},he=async()=>{await Nt(de),E("landing")},Ue=()=>{E("landing"),_(!1)},O=()=>{E(i.DASHBOARD),_(!1)},Be=()=>{const s=Pe+1;be(s),s===7&&(E(i.GAME),be(0))},Ge=[i.FILM,i.GRAPHIC,i.BUSINESS,i.CULINARY,i.PHOTO].includes(g);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-cyan-500/30 flex flex-col",children:[e.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(6, 182, 212, 0.15) 1px, transparent 0)",backgroundSize:"32px 32px"}}),e.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none bg-gradient-to-b from-transparent via-slate-950/50 to-slate-950"}),e.jsx("header",{className:"bg-slate-900/80 backdrop-blur-xl border-b border-slate-800 sticky top-0 z-50 shadow-[0_4px_20px_rgba(0,0,0,0.4)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 md:py-4 flex flex-wrap items-center justify-between gap-y-3 relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-4 cursor-pointer group",onClick:Ue,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-600 blur-lg opacity-40 group-hover:opacity-60 transition-opacity rounded-full"}),e.jsx("img",{src:qe,alt:"Salpointe Logo",className:"w-10 h-10 relative z-10 object-contain"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg md:text-xl font-bold tracking-wider text-white group-hover:text-cyan-400 transition-colors flex items-center gap-2",children:["SALPOINTE ",e.jsx("span",{className:"text-red-500",children:"CTE"})]}),e.jsx("p",{className:"text-[10px] md:text-xs text-cyan-500 uppercase tracking-[0.2em] font-mono",children:"Tech Command Hub"})]})]}),w&&e.jsx("button",{onClick:he,className:"md:hidden absolute top-3 right-4 p-2 rounded-full bg-slate-800 border border-red-900/50 text-red-400 hover:bg-slate-700 z-50",title:"Logout",children:e.jsx(Ne,{size:18})}),e.jsxs("nav",{className:"flex items-center gap-1 md:gap-2 ml-auto",children:[!Ge&&g!=="landing"&&g!=="dashboard"&&e.jsxs("button",{onClick:O,className:"text-xs md:text-sm bg-slate-800 hover:bg-slate-700 border border-slate-700 text-cyan-400 px-3 py-2 rounded-lg transition-all flex items-center gap-2 mr-1 hover:shadow-[0_0_10px_rgba(6,182,212,0.2)]",children:[e.jsx(yt,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),g!=="landing"&&e.jsxs("button",{onClick:()=>{E(i.CALENDAR),_(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${g===i.CALENDAR?"bg-cyan-950/50 border-cyan-500 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.15)]":"border-transparent text-slate-400 hover:text-cyan-400 hover:bg-slate-800"}`,children:[e.jsx(ve,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Schedule"})]}),w?e.jsxs(e.Fragment,{children:[g!=="landing"&&e.jsxs("button",{onClick:()=>{E(i.MY_REQUESTS),_(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${g===i.MY_REQUESTS?"bg-cyan-950/50 border-cyan-500 text-cyan-400 shadow-[0_0_10px_rgba(6,182,212,0.15)]":"border-transparent text-slate-400 hover:text-cyan-400 hover:bg-slate-800"}`,children:[e.jsx(ye,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"My Requests"})]}),$&&g!=="landing"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{E(i.QUEUE),_(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${g===i.QUEUE?"bg-purple-950/50 border-purple-500 text-purple-400 shadow-[0_0_10px_rgba(168,85,247,0.15)]":"border-transparent text-slate-400 hover:text-purple-400 hover:bg-slate-800"}`,children:[e.jsx(ne,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Queue"})]}),e.jsxs("button",{onClick:()=>{E(i.ANALYTICS),_(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${g===i.ANALYTICS?"bg-emerald-950/50 border-emerald-500 text-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.15)]":"border-transparent text-slate-400 hover:text-emerald-400 hover:bg-slate-800"}`,children:[e.jsx(wt,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),e.jsxs("button",{onClick:()=>{E(i.INVENTORY),_(!1)},className:`text-xs md:text-sm font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-2 border ${g===i.INVENTORY?"bg-amber-950/50 border-amber-500 text-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.15)]":"border-transparent text-slate-400 hover:text-amber-400 hover:bg-slate-800"}`,children:[e.jsx(we,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Stock"})]})]}),e.jsx("div",{className:"hidden md:block w-px h-6 bg-slate-700 mx-1"}),e.jsx("button",{onClick:he,className:"hidden md:flex ml-1 text-xs md:text-sm font-medium px-3 py-2 rounded-lg border border-red-900/30 hover:border-red-500 text-red-400 hover:bg-red-950/30 transition-all items-center gap-2",title:`Logged in as ${w.email}`,children:e.jsx(Ne,{size:16})})]}):e.jsxs("button",{onClick:pe,className:"ml-2 text-xs md:text-sm font-bold bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-500 transition-all flex items-center gap-2 shadow-[0_0_15px_rgba(8,145,178,0.4)] border border-cyan-400",children:[e.jsx(Se,{size:16})," Login"]})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6 md:py-10 relative z-10 flex-grow w-full",children:J?e.jsx(Ve,{onReset:O}):e.jsxs(e.Fragment,{children:[g===i.LANDING&&e.jsx(Ye,{currentUser:w,onLogin:pe,onEnter:O}),g===i.DASHBOARD&&e.jsx(He,{onViewChange:E,currentUser:w}),g===i.FILM&&e.jsx(tt,{setSubmitted:_,onCancel:O,currentUser:w,inventory:Z,blackouts:ee}),g===i.GRAPHIC&&e.jsx(at,{setSubmitted:_,onCancel:O,currentUser:w}),g===i.BUSINESS&&e.jsx(rt,{setSubmitted:_,onCancel:O,currentUser:w}),g===i.CULINARY&&e.jsx(lt,{setSubmitted:_,onCancel:O,currentUser:w}),g===i.PHOTO&&e.jsx(st,{setSubmitted:_,onCancel:O,currentUser:w,inventory:Z,blackouts:ee}),g===i.CALENDAR&&e.jsx(Xe,{adminMode:$,blackouts:ee}),g===i.QUEUE&&e.jsx(et,{adminMode:$,setAdminMode:W,ALLOWED_ADMINS:ze}),g===i.MY_REQUESTS&&e.jsx(Ze,{currentUser:w}),g===i.ANALYTICS&&$&&e.jsx(We,{}),g===i.INVENTORY&&$&&e.jsx(Ke,{inventory:Z,setInventory:X}),g===i.FEEDBACK&&e.jsx(Je,{currentUser:w,adminMode:$,setSubmitted:_,onCancel:O}),g===i.GAME&&e.jsx(nt,{onExit:O})]})}),e.jsx("footer",{className:"text-center py-8 px-4 border-t border-slate-800/50 mt-auto relative z-10 bg-slate-900/50",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 opacity-60 hover:opacity-100 transition-opacity duration-500",children:[e.jsx("img",{src:qe,alt:"Salpointe Catholic High School",className:"w-8 h-8 opacity-80 grayscale hover:grayscale-0 transition-all"}),e.jsxs("p",{onClick:Be,className:"text-slate-500 text-xs font-mono tracking-widest uppercase cursor-default select-none",children:["© ",new Date().getFullYear()," Salpointe Catholic High School ",e.jsx("span",{className:"text-slate-700 mx-2",children:"|"})," CTE Department"]}),e.jsxs("button",{onClick:()=>E(i.FEEDBACK),className:"text-xs text-cyan-600 hover:text-cyan-400 flex items-center gap-1 transition-colors mt-2",children:[e.jsx(ke,{size:12})," Feedback & Support"]})]})})]});function Ye({currentUser:s,onLogin:d,onEnter:a}){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center space-y-12 animate-fade-in",children:[e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-950/50 border border-cyan-500/30 text-cyan-400 text-xs font-mono uppercase tracking-widest animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.8)]"}),"System Online v1.0"]}),e.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-white tracking-tight leading-tight",children:["Master the Tools. ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Create Without Limits."})]}),e.jsx("p",{className:"text-lg md:text-xl text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"Your direct link to the CTE professional inventory. Secure the assets you need to build your portfolio—from cinema cameras to culinary prep. If you can dream it, you can reserve it."}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-4",children:s?e.jsxs("button",{onClick:a,className:"group relative px-8 py-4 bg-cyan-600 hover:bg-cyan-500 text-white text-lg font-bold rounded-xl shadow-[0_0_20px_rgba(8,145,178,0.4)] transition-all flex items-center gap-3 w-full sm:w-auto justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e.jsx(St,{size:24,className:"fill-white"})," Initialize Hub"]}):e.jsxs("button",{onClick:d,className:"group px-8 py-4 bg-white text-slate-900 hover:bg-slate-200 text-lg font-bold rounded-xl shadow-lg transition-all flex items-center gap-3 w-full sm:w-auto justify-center",children:[e.jsx(Se,{size:24})," Login to Access"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full text-left",children:[e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-red-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-red-900/20 rounded-lg flex items-center justify-center text-red-500 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(kt,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Paperless Protocol"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Deprecated legacy analog logs. Requests are now digital, trackable, and impossible to lose."})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-cyan-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-lg flex items-center justify-center text-cyan-400 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Ct,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Real-Time Inventory"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Live database tracking prevents double-bookings. See exactly what gear is available, instantly."})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-2xl backdrop-blur-sm hover:border-emerald-500/30 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-900/20 rounded-lg flex items-center justify-center text-emerald-400 mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Dt,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Secure Access"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Authenticated via Salpointe Google Workspace. Your data is protected and your history is saved."})]})]})]})}function Ve({onReset:s}){return e.jsxs("div",{className:"max-w-lg mx-auto bg-slate-900/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-800 p-8 text-center animate-fade-in-up",children:[e.jsx("div",{className:"w-20 h-20 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-6 text-green-400 shadow-[0_0_20px_rgba(74,222,128,0.2)]",children:e.jsx(At,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2 tracking-tight",children:"Request Transmitted"}),e.jsx("p",{className:"text-slate-400 mb-8 text-sm leading-relaxed",children:"Your data has been securely logged in the mainframe. The department head has been notified via quantum link (email)."}),e.jsx("button",{onClick:s,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-3 rounded-lg font-semibold transition-all shadow-[0_0_15px_rgba(8,145,178,0.4)]",children:"Return to Dashboard"})]})}function He({onViewChange:s,currentUser:d}){const[a,f]=l.useState({});l.useEffect(()=>{(()=>{const j={},x={[i.FILM]:"Film",[i.GRAPHIC]:"Graphic",[i.BUSINESS]:"Business",[i.CULINARY]:"Culinary",[i.PHOTO]:"Photo"};Object.keys(x).forEach(C=>{const N=Fe(x[C]);localStorage.getItem(N)&&(j[C]=!0)}),f(j)})()},[]);const p=[{id:i.FILM,title:"Film & TV",icon:Ce,desc:"Checkout cameras, drones, and broadcast equipment.",color:"text-cyan-400",bg:"group-hover:shadow-cyan-500/20 group-hover:border-cyan-500/50"},{id:i.GRAPHIC,title:"Graphic Design",icon:De,desc:"Request logos, posters, websites, and creative assets.",color:"text-fuchsia-400",bg:"group-hover:shadow-fuchsia-500/20 group-hover:border-fuchsia-500/50"},{id:i.BUSINESS,title:"Business",icon:oe,desc:"Submit business plans and startup consultations.",color:"text-emerald-400",bg:"group-hover:shadow-emerald-500/20 group-hover:border-emerald-500/50"},{id:i.CULINARY,title:"Culinary Arts",icon:Ae,desc:"Catering services for school clubs and events.",color:"text-amber-400",bg:"group-hover:shadow-amber-500/20 group-hover:border-amber-500/50"},{id:i.PHOTO,title:"Photography",icon:ie,desc:"Reserve DSLR bodies, lenses, and event coverage.",color:"text-pink-400",bg:"group-hover:shadow-pink-500/20 group-hover:border-pink-500/50"}];return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-full mb-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white tracking-tight mb-2",children:d?`Welcome, ${d.displayName.split(" ")[0]}.`:"Access Granted."}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Select a sector to initialize a request."})]}),p.map(c=>e.jsxs("div",{onClick:()=>s(c.id),className:`group relative bg-slate-900/40 backdrop-blur-sm rounded-2xl p-6 cursor-pointer border border-slate-800 transition-all duration-300 hover:-translate-y-1 ${c.bg}`,children:[a[c.id]&&e.jsxs("span",{className:"absolute top-4 right-4 bg-amber-500/10 text-amber-400 border border-amber-500/30 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(K,{size:12})," RESUME"]}),e.jsx("div",{className:`w-14 h-14 rounded-xl bg-slate-800/50 flex items-center justify-center mb-5 ${c.color} transition-transform group-hover:scale-110 duration-300`,children:e.jsx(c.icon,{size:28})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-cyan-400 transition-colors",children:c.title}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:c.desc})]},c.id))]})}function Qe({initialData:s={},currentUser:d}){const a=d?.displayName||s.fullName||"",f=d?.email||s.email||"";return e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-slate-800 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 flex items-center gap-2",children:[e.jsx(Gt,{size:18})," Identity Verification"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Project Designation"}),e.jsx("input",{name:"requestName",type:"text",defaultValue:s.requestName||"",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",placeholder:"e.g. Football Video",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Full Name"}),e.jsx("input",{name:"fullName",type:"text",defaultValue:a,readOnly:!!d,className:`w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all ${d?"opacity-70 cursor-not-allowed":""}`,placeholder:"Jane Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Comm Link (Email)"}),e.jsx("input",{name:"email",type:"email",defaultValue:f,readOnly:!!d,className:`w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all ${d?"opacity-70 cursor-not-allowed":""}`,placeholder:"jdoe@salpointe.org",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Clearance Level"}),e.jsxs("select",{name:"role",defaultValue:s.role||"Student",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 outline-none transition-all",children:[e.jsx("option",{children:"Student"}),e.jsx("option",{children:"Faculty / Staff"}),e.jsx("option",{children:"Club Representative"})]})]})]})]})}function Ke({inventory:s,setInventory:d}){const[a,f]=l.useState(!1),[p,c]=l.useState(s),[j,x]=l.useState(!1),[C,N]=l.useState(!1),[D,k]=l.useState(""),[A,h]=l.useState(1),[I,y]=l.useState("film"),[q,T]=l.useState(!1);l.useEffect(()=>{a||c(s)},[s,a]);const r=()=>{a&&j&&!window.confirm("You have unsaved changes. Discard them?")||(c(s),f(!a),x(!1))},v=(t,n,m)=>{c(F=>({...F,[t]:{...F[t],[n]:m}})),x(!0)},S=t=>{if(window.confirm(`Permanently remove "${t}" from the database?`)){const n={...p};delete n[t],c(n),x(!0)}},o=t=>{if(t.preventDefault(),!D.trim())return;const n=D.trim();if(p[n]){alert("An item with this name already exists.");return}c(m=>({...m,[n]:{count:parseInt(A)||0,category:I,requiresTraining:q}})),k(""),h(1),x(!0)},u=async()=>{if(window.confirm("Are you sure you want to commit these changes to the live system?")){N(!0);try{await le(P(L,"settings","inventory_v2"),p),d(p),f(!1),x(!1),alert("✅ Inventory Database Updated Successfully")}catch(t){console.error("Save failed:",t),alert("❌ Error: Could not save changes.")}finally{N(!1)}}},b={film:[],photo:[],culinary:[],general:[]};return Object.entries(p).forEach(([t,n])=>{const m=n.category||"general";b[m]?b[m].push({name:t,...n}):b.general.push({name:t,...n})}),e.jsxs("div",{className:`bg-slate-900/80 backdrop-blur-xl rounded-2xl border overflow-hidden shadow-2xl transition-colors duration-300 ${a?"border-indigo-500/30":"border-slate-800"}`,children:[e.jsxs("div",{className:`p-6 border-b flex flex-col sm:flex-row justify-between items-center gap-4 transition-colors ${a?"bg-indigo-950/20 border-indigo-500/30":"bg-slate-950/50 border-slate-800"}`,children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(we,{className:a?"text-indigo-400":"text-amber-400"}),"Inventory Master List"]}),e.jsx("p",{className:`text-sm transition-colors ${a?"text-indigo-300":"text-slate-400"}`,children:a?"EDIT MODE ACTIVE: Review changes before saving.":"View-only mode. Authenticated admins may edit."})]}),e.jsx("div",{className:"flex gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg font-medium text-slate-400 hover:text-white hover:bg-slate-800 border border-transparent hover:border-slate-600 transition-all",children:"Cancel"}),e.jsxs("button",{onClick:u,disabled:!j||C,className:`px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg transition-all ${j?"bg-green-600 hover:bg-green-500 text-white":"bg-slate-800 text-slate-500 cursor-not-allowed border border-slate-700"}`,children:[C?e.jsx(It,{className:"animate-spin",size:18}):e.jsx(K,{size:18}),"Save Changes"]})]}):e.jsxs("button",{onClick:r,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg hover:shadow-indigo-500/20 transition-all",children:[e.jsx(Et,{size:18})," Edit Inventory"]})})]}),a&&e.jsx("div",{className:"p-6 bg-slate-900/50 border-b border-indigo-500/20 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-xl border border-slate-700/50",children:[e.jsxs("h3",{className:"text-xs font-bold text-indigo-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(Ie,{size:14})," Add New Asset"]}),e.jsxs("form",{onSubmit:o,className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1 ml-1",children:"Asset Name"}),e.jsx("input",{type:"text",value:D,onChange:t=>k(t.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-white text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 outline-none transition-all",placeholder:"e.g. GoPro Hero 11 Black"})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1 ml-1",children:"Qty"}),e.jsx("input",{type:"number",min:"0",value:A,onChange:t=>h(t.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-white text-sm focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{className:"w-40",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1 ml-1",children:"Category"}),e.jsxs("select",{value:I,onChange:t=>y(t.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-white text-sm focus:border-indigo-500 outline-none transition-all",children:[e.jsx("option",{value:"film",children:"Film & TV"}),e.jsx("option",{value:"photo",children:"Photography"}),e.jsx("option",{value:"culinary",children:"Culinary Arts"}),e.jsx("option",{value:"general",children:"General Stock"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pb-3 px-2",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:t=>T(t.target.checked),className:"w-4 h-4 rounded bg-slate-950 border-slate-600 accent-indigo-500 cursor-pointer"}),e.jsx("label",{className:"text-xs text-slate-400 cursor-pointer",onClick:()=>T(!q),children:"Training Req."})]}),e.jsx("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2.5 rounded-lg transition-all shadow-lg hover:shadow-indigo-500/20",children:e.jsx(Ie,{size:20})})]})]})}),e.jsx("div",{className:"p-6 space-y-8",children:Object.entries(b).map(([t,n])=>n.length>0&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h3",{className:"text-sm font-bold text-white uppercase tracking-widest mb-4 border-b border-slate-800 pb-2 flex items-center gap-3",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t==="film"?"bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.6)]":t==="photo"?"bg-pink-400 shadow-[0_0_8px_rgba(244,114,182,0.6)]":t==="culinary"?"bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.6)]":"bg-slate-400"}`}),t," Inventory"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(m=>e.jsx("div",{className:`group relative p-3 rounded-xl border transition-all duration-300 ${a?"bg-slate-900 border-indigo-900/30":"bg-slate-950/40 border-slate-800 hover:border-slate-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center h-full",children:[e.jsxs("div",{className:"flex-1 mr-4 min-w-0",children:[e.jsx("div",{className:"font-medium text-slate-200 text-sm truncate",title:m.name,children:m.name}),a?e.jsxs("label",{className:"flex items-center gap-1.5 mt-1.5 cursor-pointer w-fit p-1 -ml-1 rounded hover:bg-slate-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:m.requiresTraining,onChange:F=>v(m.name,"requiresTraining",F.target.checked),className:"rounded border-slate-600 bg-slate-800 accent-red-500 w-3 h-3"}),e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wide ${m.requiresTraining?"text-red-400":"text-slate-600"}`,children:"Training Required"})]}):m.requiresTraining&&e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-950/30 border border-red-900/50 px-2 py-0.5 rounded-full inline-flex items-center gap-1",children:[e.jsx(Ee,{size:8})," TRAINING REQ"]})})]}),e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center bg-slate-950 rounded-lg border border-slate-700 overflow-hidden",children:[e.jsx("button",{onClick:()=>v(m.name,"count",Math.max(0,m.count-1)),className:"px-2 py-1.5 text-slate-400 hover:text-white hover:bg-slate-800 transition-colors bg-slate-900 border-r border-slate-800 active:bg-slate-700",children:"-"}),e.jsx("input",{type:"number",value:m.count,onChange:F=>v(m.name,"count",parseInt(F.target.value)||0),className:"w-12 text-center bg-transparent text-sm font-mono text-white focus:outline-none appearance-none font-bold"}),e.jsx("button",{onClick:()=>v(m.name,"count",m.count+1),className:"px-2 py-1.5 text-slate-400 hover:text-white hover:bg-slate-800 transition-colors bg-slate-900 border-l border-slate-800 active:bg-slate-700",children:"+"})]}),e.jsx("button",{onClick:()=>S(m.name),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-950/30 rounded-lg border border-transparent hover:border-red-900/30 transition-all",title:"Delete Asset",children:e.jsx(Re,{size:16})})]}):e.jsxs("div",{className:"bg-slate-900 border border-slate-800 px-3 py-1.5 rounded-lg flex flex-col items-center min-w-[50px]",children:[e.jsx("span",{className:`text-sm font-mono font-bold ${m.count===0?"text-red-500":"text-cyan-400"}`,children:m.count}),e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-bold tracking-wider",children:"Stock"})]})})]})},m.name))})]},t))})]})}function Je({currentUser:s,adminMode:d,setSubmitted:a,onCancel:f}){const[p,c]=l.useState("bug"),[j,x]=l.useState(""),[C,N]=l.useState([]);l.useEffect(()=>{if(d){const h=G(U(L,"feedback"),re("createdAt","desc")),I=Y(h,y=>{const q=y.docs.map(T=>({id:T.id,...T.data()}));N(q)});return()=>I()}},[d]);const D=async h=>{if(h.preventDefault(),!!j.trim())try{const I={type:p,message:j,email:s?.email||"Anonymous",fullName:s?.displayName||"Guest",createdAt:new Date,status:"Open"};await je(U(L,"feedback"),I),p==="bug"&&ue({to_name:"Admin",to_email:"erivers@salpointe.org",subject:"[BUG REPORT] CTE Hub Issue",title:"Bug Report",status:"Urgent",message:`User ${I.fullName} reported a bug:

${j}`}),alert("Feedback received."),x(""),d||f()}catch(I){console.error(I),alert("Error sending feedback.")}},k=async h=>{window.confirm("Mark Resolved?")&&await fe(P(L,"feedback",h),{status:"Resolved"})},A=async h=>{window.confirm("Delete feedback?")&&await Q(P(L,"feedback",h))};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-cyan-950/30 border border-cyan-500/30 text-cyan-400",children:e.jsx(ke,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Feedback"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Report glitches or suggest system upgrades."})]})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>c("bug"),className:`p-4 rounded-xl border text-left transition-all ${p==="bug"?"bg-red-950/40 border-red-500 text-red-400":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[e.jsx(Te,{size:18})," Bug Report"]}),e.jsx("p",{className:"text-xs opacity-80",children:"Something is broken."})]}),e.jsxs("button",{type:"button",onClick:()=>c("feature"),className:`p-4 rounded-xl border text-left transition-all ${p==="feature"?"bg-amber-950/40 border-amber-500 text-amber-400":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[e.jsx(Le,{size:18})," Feature Idea"]}),e.jsx("p",{className:"text-xs opacity-80",children:'"It would be cool if..."'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-2 ml-1",children:"Details"}),e.jsx("textarea",{value:j,onChange:h=>x(h.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-slate-200 focus:border-cyan-500 outline-none h-32",placeholder:"Describe...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 rounded-lg border border-slate-700 text-slate-400 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-2 rounded-lg font-bold shadow-lg transition-all",children:"Submit Feedback"})]})]})]}),d&&e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-purple-400"})," Admin Feedback Inbox"]}),e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsx("p",{className:"text-slate-500 text-center py-4",children:"No reports."}):C.map(h=>e.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-4 rounded-xl flex flex-col sm:flex-row gap-4 justify-between items-start hover:border-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.type==="bug"?e.jsxs("span",{className:"text-xs font-bold bg-red-900/30 text-red-400 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Te,{size:12})," BUG"]}):e.jsxs("span",{className:"text-xs font-bold bg-amber-900/30 text-amber-400 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(Le,{size:12})," IDEA"]}),h.status==="Resolved"&&e.jsx("span",{className:"text-xs font-bold bg-green-900/30 text-green-400 px-2 py-1 rounded",children:"RESOLVED"}),e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:h.fullName})]}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mt-2",children:h.message})]}),e.jsxs("div",{className:"flex gap-2",children:[h.status!=="Resolved"&&e.jsx("button",{onClick:()=>k(h.id),className:"p-2 bg-green-900/20 text-green-500 rounded-lg hover:bg-green-900/40",title:"Mark Resolved",children:e.jsx(Rt,{size:16})}),e.jsx("button",{onClick:()=>A(h.id),className:"p-2 bg-slate-800 text-slate-500 rounded-lg hover:bg-red-900/20 hover:text-red-500",title:"Delete",children:e.jsx(Re,{size:16})})]})]},h.id))})]})]})}function We(){const[s,d]=l.useState(!0),[a,f]=l.useState({total:0,approved:0,pending:0,deptCounts:{},topEquipment:[]});l.useEffect(()=>{const c=G(U(L,"requests")),j=Y(c,x=>{let C=0,N=0,D=0,k={},A={};x.forEach(I=>{const y=I.data();C++,(y.status==="Approved"||y.status==="Completed")&&N++,y.status==="Pending Review"&&D++,k[y.dept]=(k[y.dept]||0)+1,y.equipment&&(Array.isArray(y.equipment)?y.equipment:[y.equipment]).forEach(T=>{A[T]=(A[T]||0)+1})});const h=Object.entries(A).sort(([,I],[,y])=>y-I).slice(0,5);f({total:C,approved:N,pending:D,deptCounts:k,topEquipment:h}),d(!1)});return()=>j()},[]);const p=a.total>0?Math.round(a.approved/a.total*100):0;return e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Tt,{className:"text-emerald-400"})," Data Analytics"]})}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 px-4 py-2 rounded-lg text-cyan-400 font-mono text-sm",children:["Total Requests: ",e.jsx("strong",{children:a.total})]})]}),s?e.jsx("div",{className:"text-center py-12 text-slate-500 font-mono",children:"CALCULATING..."}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-950/30 rounded-xl p-5 border border-emerald-500/20",children:[e.jsx("h4",{className:"text-emerald-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Approval Rate"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("span",{className:"text-4xl font-bold text-emerald-400 font-mono",children:[p,"%"]})})]}),e.jsxs("div",{className:"bg-blue-950/30 rounded-xl p-5 border border-blue-500/20",children:[e.jsx("h4",{className:"text-blue-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Completed"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-blue-400 font-mono",children:a.approved})})]}),e.jsxs("div",{className:"bg-amber-950/30 rounded-xl p-5 border border-amber-500/20",children:[e.jsx("h4",{className:"text-amber-400 font-bold text-xs uppercase tracking-widest mb-2",children:"Pending"}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsx("span",{className:"text-4xl font-bold text-amber-400 font-mono",children:a.pending})})]}),e.jsxs("div",{className:"md:col-span-2 bg-slate-950/50 rounded-xl border border-slate-800 p-5",children:[e.jsxs("h3",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(Lt,{size:16,className:"text-purple-400"})," Requests by Department"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(a.deptCounts).sort(([,c],[,j])=>j-c).map(([c,j])=>{const x=j/a.total*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2 font-mono",children:[e.jsx("span",{className:"text-slate-400",children:c}),e.jsx("span",{className:"text-cyan-400",children:j})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${x}%`}})})]},c)})})]}),e.jsxs("div",{className:"bg-slate-950/50 rounded-xl border border-slate-800 p-5",children:[e.jsxs("h3",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(ie,{size:16,className:"text-pink-400"})," Top Gear"]}),e.jsx("ul",{className:"space-y-3",children:a.topEquipment.map(([c,j],x)=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-slate-800 text-cyan-400 flex items-center justify-center text-xs font-mono border border-slate-700",children:x+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 truncate",children:c.replace(" *","")}),e.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[j," uses"]})]})]},c))})]})]})]})})}function Ze({currentUser:s}){const[d,a]=l.useState([]),[f,p]=l.useState(!0);l.useEffect(()=>{if(!s)return;const x=G(U(L,"requests"),ft("email","==",s.email),re("createdAt","desc")),C=Y(x,N=>{const D=N.docs.map(k=>({id:k.id,...k.data(),formattedDate:Me(k.data().createdAt)}));a(D),p(!1)});return()=>C()},[s]);const c=async x=>{window.confirm("Are you sure?")&&await Q(P(L,"requests",x))},j=x=>{const C={Approved:"bg-green-950/50 text-green-400 border-green-500/30",Denied:"bg-red-950/50 text-red-400 border-red-500/30",Completed:"bg-slate-800 text-slate-400 border-slate-700",default:"bg-amber-950/50 text-amber-400 border-amber-500/30"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border ${C[x]||C.default}`,children:x})};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"bg-slate-950/50 border-b border-slate-800 p-6",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ye,{className:"text-cyan-400"})," My Request History"]})}),e.jsx("div",{className:"overflow-x-auto",children:f?e.jsx("div",{className:"p-8 text-center text-slate-500 font-mono",children:"LOADING DATA..."}):d.length===0?e.jsx("div",{className:"p-12 text-center text-slate-500",children:"No records found."}):e.jsxs("table",{className:"w-full text-left border-collapse min-w-[700px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800/50 border-b border-slate-700 text-xs uppercase text-slate-400 font-mono",children:[e.jsx("th",{className:"p-4",children:"Ref ID"}),e.jsx("th",{className:"p-4",children:"Dept"}),e.jsx("th",{className:"p-4",children:"Project"}),e.jsx("th",{className:"p-4",children:"Date Submitted"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:d.map(x=>e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"p-4 text-cyan-400 font-mono text-xs",children:x.displayId}),e.jsx("td",{className:"p-4 text-slate-300 text-sm capitalize",children:x.dept}),e.jsx("td",{className:"p-4 font-semibold text-white text-sm",children:x.title}),e.jsx("td",{className:"p-4 text-slate-400 text-sm font-mono",children:x.formattedDate}),e.jsx("td",{className:"p-4",children:j(x.status)}),e.jsx("td",{className:"p-4",children:x.status==="Pending Review"&&e.jsx("button",{onClick:()=>c(x.id),className:"text-xs text-red-400 border border-red-900 hover:bg-red-950/50 px-3 py-1 rounded transition-colors",children:"Cancel"})})]},x.id))})]})})]})}function Xe({adminMode:s,blackouts:d}){const[a,f]=l.useState(new Date),[p,c]=l.useState(null),[j,x]=l.useState("all"),[C,N]=l.useState([]),[D,k]=l.useState(!0),A=()=>f(new Date(a.setMonth(a.getMonth()+1))),h=()=>f(new Date(a.setMonth(a.getMonth()-1)));l.useEffect(()=>{const t=G(U(L,"requests")),n=Y(t,m=>{const F=m.docs.map(M=>{const R=M.data();let H=R.eventDate||R.checkoutDate||R.pickupDate||R.deadline;if(!H)return null;const[te,se,B]=H.split("-").map(Number),ae=new Date(te,se-1,B);return{id:M.id,title:R.title||R.requestName||"Request",displayId:R.displayId,dept:R.dept,type:R.requestType==="checkout"||R.dept==="Graphic"?"checkout":"event",status:R.status,date:ae,...R}}).filter(M=>M!==null&&M.status==="Approved");N(F),k(!1)});return()=>n()},[]);const I=async t=>{const m=new Date(a.getFullYear(),a.getMonth(),t).toISOString().split("T")[0];if(s){d.includes(m)?window.confirm(`Re-open ${m}?`)&&await Q(P(L,"blackout_dates",m)):window.confirm(`Blackout ${m}?`)&&await le(P(L,"blackout_dates",m),{reason:"Closed"});return}c(p===t?null:t)},y=t=>{const n=t.getFullYear(),m=t.getMonth(),F=new Date(n,m+1,0).getDate(),M=new Date(n,m,1).getDay();return{days:F,firstDay:M,monthName:t.toLocaleString("default",{month:"long"}),year:n}},{days:q,firstDay:T,monthName:r,year:v}=y(a),S=Array.from({length:q},(t,n)=>n+1),o=Array.from({length:T},(t,n)=>n),u=t=>C.filter(n=>n.date.getDate()===t&&n.date.getMonth()===a.getMonth()&&n.date.getFullYear()===a.getFullYear()&&(j==="all"||n.dept===j)),b=t=>{const n="https://calendar.google.com/calendar/render?action=TEMPLATE",m=`&text=${encodeURIComponent(`[${t.dept}] ${t.title}`)}`,F=`&details=${encodeURIComponent(`Ref: ${t.displayId}
Requested by: ${t.fullName}
Role: ${t.role}
Details: ${t.details||t.brief||t.description||"N/A"}`)}`,M=`&location=${encodeURIComponent(t.location||"Salpointe Catholic High School")}`,R=t.date.getFullYear(),H=String(t.date.getMonth()+1).padStart(2,"0"),te=String(t.date.getDate()).padStart(2,"0"),se=`${R}${H}${te}`,B=new Date(t.date);B.setDate(B.getDate()+1);const ae=B.getFullYear(),ot=String(B.getMonth()+1).padStart(2,"0"),it=String(B.getDate()).padStart(2,"0"),ct=`${ae}${ot}${it}`,dt=`&dates=${se}/${ct}`;return`${n}${m}${dt}${F}${M}`};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-slate-950/50 p-6 border-b border-slate-800 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[e.jsx("button",{onClick:h,className:"p-1 hover:bg-slate-800 rounded-full transition-colors text-cyan-400",children:e.jsx(_t,{size:24})}),e.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-white",children:[r," ",e.jsx("span",{className:"text-slate-500",children:v})]}),e.jsx("button",{onClick:A,className:"p-1 hover:bg-slate-800 rounded-full transition-colors text-cyan-400",children:e.jsx(qt,{size:24})})]})}),e.jsx("div",{className:"flex bg-slate-800/50 rounded-lg p-1 w-full md:w-auto overflow-x-auto",children:["all",i.FILM,i.PHOTO,i.CULINARY].map(t=>e.jsx("button",{onClick:()=>x(t),className:`flex-1 md:flex-none px-3 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-medium transition-all whitespace-nowrap capitalize ${j===t?"bg-cyan-600 text-white shadow-[0_0_10px_rgba(8,145,178,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-700"}`,children:t==="all"?"All":t},t))})]}),e.jsxs("div",{className:"p-6",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-slate-800/50 border border-slate-700 rounded text-xs text-slate-400 flex items-center gap-2 font-mono",children:[e.jsx(_e,{size:14,className:"text-red-400"})," Admin Mode: Click a date to toggle blackout."]}),e.jsx("div",{className:"overflow-x-auto pb-2",children:D?e.jsx("div",{className:"text-center py-8 text-slate-500 font-mono",children:"LOADING MATRIX..."}):e.jsxs("div",{className:"min-w-[600px] md:min-w-0 grid grid-cols-7 gap-px bg-slate-800 border border-slate-800 rounded-xl overflow-hidden shadow-inner",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"bg-slate-900 p-2 text-center text-xs font-bold text-slate-500 uppercase tracking-wider",children:t},t)),o.map(t=>e.jsx("div",{className:"bg-slate-950/50 min-h-[80px] md:min-h-[100px]"},`empty-${t}`)),S.map(t=>{const n=u(t),m=t===new Date().getDate()&&a.getMonth()===new Date().getMonth()&&a.getFullYear()===new Date().getFullYear(),F=new Date(v,a.getMonth(),t).toISOString().split("T")[0],M=d.includes(F);return e.jsxs("div",{className:`min-h-[80px] md:min-h-[100px] p-1 md:p-2 border-t border-slate-800 relative group cursor-pointer transition-colors ${M?"bg-slate-900/30":"bg-slate-950/50"} ${p===t?"bg-cyan-900/20 border-cyan-500/30":"hover:bg-slate-900"}`,onClick:()=>I(t),children:[e.jsx("span",{className:`text-xs md:text-sm font-medium inline-block w-6 h-6 md:w-7 md:h-7 leading-6 md:leading-7 text-center rounded-full mb-1 ${m?"bg-red-600 text-white shadow-[0_0_10px_rgba(220,38,38,0.5)]":"text-slate-400"}`,children:t}),M?e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(_e,{className:"text-red-900/50",size:20})}):e.jsx("div",{className:"space-y-1",children:n.map(R=>e.jsx("div",{className:`text-[10px] md:text-xs p-1 rounded border truncate ${R.type==="checkout"?"bg-cyan-950/50 text-cyan-400 border-cyan-800/50":"bg-emerald-950/50 text-emerald-400 border-emerald-800/50"}`,children:R.title},R.id))})]},t)})]})}),p&&!d.includes(new Date(v,a.getMonth(),p).toISOString().split("T")[0])&&e.jsxs("div",{className:"mt-6 p-4 bg-slate-900/50 rounded-xl border border-slate-800 animate-fade-in",children:[e.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(ve,{size:16,className:"text-cyan-400"})," ",r," ",p]}),u(p).length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Sector clear. No events."}):e.jsx("div",{className:"space-y-3",children:u(p).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-3 rounded-lg border border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-200 text-sm",children:t.title}),e.jsxs("p",{className:"text-xs text-slate-400 uppercase",children:[t.dept," • ",t.fullName]})]}),e.jsx("a",{href:b(t),target:"_blank",rel:"noopener noreferrer",className:"bg-slate-700 hover:bg-slate-600 p-2 rounded text-white transition-colors",children:e.jsx(zt,{size:16})})]},t.id))})]})]})]})}function et({adminMode:s,setAdminMode:d,ALLOWED_ADMINS:a}){const[f,p]=l.useState([]),[c,j]=l.useState("all"),[x,C]=l.useState(!0),[N,D]=l.useState(null),[k,A]=l.useState("");l.useEffect(()=>{const r=G(U(L,"requests"),re("createdAt","desc")),v=Y(r,S=>{const o=S.docs.map(u=>({id:u.id,...u.data(),formattedDate:Me(u.data().createdAt)}));p(o),C(!1)});return()=>v()},[]);const h=async(r,v)=>{window.confirm(`Confirm status change to: ${v}?`)&&(await fe(P(L,"requests",r.id),{status:v}),N&&N.id===r.id&&D(S=>({...S,status:v})),ue({to_name:r.fullName,to_email:r.email,subject:`Request Update: ${r.title}`,title:r.title,status:v,message:`Status updated to ${v}.`}))},I=async r=>{window.confirm("Delete this record permanently?")&&(await Q(P(L,"requests",r)),N&&N.id===r&&D(null))},y=()=>{const r=["ID","Department","Title","User","Email","Date Submitted","Status","Details"],v=f.map(b=>[b.displayId,b.dept,`"${b.title}"`,b.fullName,b.email,b.formattedDate,b.status,`"${(b.details||b.brief||b.description||"").replace(/"/g,'""')}"`]),S="data:text/csv;charset=utf-8,"+[r.join(","),...v.map(b=>b.join(","))].join(`
`),o=encodeURI(S),u=document.createElement("a");u.setAttribute("href",o),u.setAttribute("download","cte_requests_export.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},q=f.filter(r=>{const v=c==="all"?!0:r.dept?.toLowerCase().includes(c.toLowerCase()),S=k.toLowerCase(),o=r.title?.toLowerCase().includes(S)||r.fullName?.toLowerCase().includes(S)||r.displayId?.toLowerCase().includes(S)||r.email?.toLowerCase().includes(S);return v&&o}),T=r=>{switch(r){case"Approved":return"bg-green-950/50 text-green-400 border-green-500/30";case"Denied":return"bg-red-950/50 text-red-400 border-red-500/30";case"Completed":return"bg-slate-800 text-slate-400 border-slate-700";default:return"bg-amber-950/50 text-amber-400 border-amber-500/30"}};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl rounded-2xl border border-slate-800 overflow-hidden shadow-2xl relative",children:[N&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-start sticky top-0 bg-slate-900 z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Data Packet"}),e.jsxs("div",{className:"flex gap-3 text-xs text-cyan-500 font-mono mt-1",children:[e.jsxs("span",{children:["ID: ",N.displayId||"N/A"]}),e.jsxs("span",{className:"opacity-50",children:["| Ref: ",N.id]})]})]}),e.jsx("button",{onClick:()=>D(null),className:"text-slate-400 hover:text-white hover:bg-slate-800 p-2 rounded-full transition-colors",children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Sector"}),e.jsx("p",{className:"font-semibold text-white capitalize",children:N.dept})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border ${T(N.status)}`,children:N.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Operative"}),e.jsx("p",{className:"text-slate-200",children:N.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block mb-1",children:"Comm Link"}),e.jsx("p",{className:"text-slate-200 font-mono text-sm",children:N.email})]})]}),e.jsxs("div",{className:"border-t border-slate-800 pt-4",children:[e.jsxs("h4",{className:"font-bold text-slate-300 mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[e.jsx(oe,{size:16,className:"text-cyan-500"})," Mission Details"]}),e.jsx("div",{className:"bg-slate-950/50 rounded-lg p-4 space-y-4 border border-slate-800",children:Object.entries(N).map(([r,v])=>["id","dept","status","fullName","email","role","formattedDate","createdAt","title","requestName","displayId"].includes(r)?null:Array.isArray(v)?e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:r}),e.jsx("ul",{className:"list-disc list-inside text-sm text-slate-300 bg-slate-900 p-2 rounded border border-slate-800",children:v.map((S,o)=>e.jsx("li",{children:S},o))})]},r):e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:r.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-slate-300 text-sm whitespace-pre-wrap",children:v})]},r))})]}),s&&e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"font-bold text-slate-400 mb-3 text-xs uppercase tracking-wide",children:"Command Actions"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(N,"Approved"),className:"flex-1 py-2 bg-green-900/30 text-green-400 border border-green-900 hover:bg-green-900/50 rounded text-sm font-medium transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>h(N,"Denied"),className:"flex-1 py-2 bg-red-900/30 text-red-400 border border-red-900 hover:bg-red-900/50 rounded text-sm font-medium transition-colors",children:"Deny"})]})]})]})]})}),e.jsxs("div",{className:"bg-slate-950/50 border-b border-slate-800 p-4 md:p-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-white",children:[e.jsx(ne,{className:"text-purple-400"})," Request Log"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Live Database Feed"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 lg:w-64",children:[e.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search database...",className:"w-full bg-slate-900 text-white border border-slate-700 rounded-lg pl-9 pr-4 py-2 text-sm focus:outline-none focus:border-cyan-500 placeholder-slate-600",value:k,onChange:r=>A(r.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"bg-slate-900 text-white border border-slate-700 rounded-lg px-4 py-2 text-sm focus:border-cyan-500 outline-none",value:c,onChange:r=>j(r.target.value),children:[e.jsx("option",{value:"all",children:"All Sectors"}),e.jsx("option",{value:"film",children:"Film"}),e.jsx("option",{value:"graphic",children:"Graphic"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"culinary",children:"Culinary"}),e.jsx("option",{value:"photo",children:"Photo"})]}),s&&e.jsxs("button",{onClick:y,className:"bg-emerald-900/30 hover:bg-emerald-900/50 text-emerald-400 border border-emerald-900 px-3 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",title:"Download CSV",children:[e.jsx(Mt,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:x?e.jsx("div",{className:"p-8 text-center text-slate-500 font-mono",children:"INITIALIZING STREAM..."}):e.jsxs("table",{className:"w-full text-left border-collapse min-w-[700px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50 border-b border-slate-800 text-xs uppercase text-slate-500 font-mono",children:[e.jsx("th",{className:"p-4",children:"ID Code"}),e.jsx("th",{className:"p-4",children:"Sector"}),e.jsx("th",{className:"p-4",children:"Objective"}),e.jsx("th",{className:"p-4",children:"Agent"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"View"}),s&&e.jsx("th",{className:"p-4",children:"Override"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:q.map(r=>e.jsxs("tr",{className:"hover:bg-slate-800/40 transition-colors",children:[e.jsx("td",{className:"p-4 text-cyan-600 font-mono text-xs",children:r.displayId}),e.jsx("td",{className:"p-4 text-slate-400 text-sm capitalize",children:r.dept}),e.jsx("td",{className:"p-4 text-white font-medium text-sm",children:r.title}),e.jsx("td",{className:"p-4 text-slate-400 text-sm",children:r.fullName}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border ${T(r.status)}`,children:r.status})}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>D(r),className:"text-slate-500 hover:text-cyan-400 p-2 transition-colors",children:e.jsx($t,{size:20})})}),s&&e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsx("button",{onClick:()=>h(r,"Approved"),className:"p-1 bg-green-900/20 text-green-500 rounded hover:bg-green-900/40",children:e.jsx(Ot,{size:16})}),e.jsx("button",{onClick:()=>h(r,"Denied"),className:"p-1 bg-red-900/20 text-red-500 rounded hover:bg-red-900/40",children:e.jsx(ce,{size:16})}),e.jsx("button",{onClick:()=>I(r.id),className:"p-1 bg-slate-800 text-slate-500 rounded hover:bg-slate-700",children:e.jsx("span",{className:"font-mono text-xs font-bold px-1",children:"DEL"})})]})]},r.id))})]})})]})}function V({title:s,icon:d,colorClass:a,children:f,setSubmitted:p,initialData:c={},onCancel:j,currentUser:x,blackouts:C=[]}){const N=l.useRef(null),D=Fe(s),[k,A]=l.useState(!1),h=()=>{const v=new FormData(N.current),S={};for(const[o,u]of v.entries())S[o]?(Array.isArray(S[o])||(S[o]=[S[o]]),S[o].push(u)):S[o]=u;return localStorage.setItem(D,JSON.stringify(S)),!0},I=v=>{v.preventDefault(),h(),alert("Draft secured in local cache.")},y=()=>{A(!0)},q=()=>{h(),A(!1),j()},T=()=>{localStorage.removeItem(D),A(!1),j()},r=async v=>{v.preventDefault();const S=new FormData(v.target),o={};for(const[t,n]of S.entries())o[t]?(Array.isArray(o[t])||(o[t]=[o[t]]),o[t].push(n)):o[t]=n;const u=["checkoutDate","returnDate","eventDate","pickupDate","deadline"];let b=!1;if(u.forEach(t=>{o[t]&&C.includes(o[t])&&(b=!0)}),b){alert("Date blocked by admin protocol. Select alternative.");return}try{const t=Date.now().toString().slice(-4),n=Math.floor(1e3+Math.random()*9e3),m=`REQ-${t}-${n}`;await je(U(L,"requests"),{...o,dept:s,displayId:m,status:"Pending Review",createdAt:new Date,title:o.requestName||o.eventName||o.projectType||o.businessName||"New Request"}),ue({to_name:"Admin",to_email:"erivers@salpointe.org",subject:`New Request: ${o.requestName}`,title:o.requestName,status:"Pending Review",message:`New request (${m}) from ${o.fullName}.`}),localStorage.removeItem(D),p(!0)}catch(t){console.error(t),alert("Transmission error.")}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-slate-900/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-800 overflow-hidden relative",children:[k&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 rounded-xl shadow-2xl border border-slate-700 max-w-md w-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-900/20 rounded-full flex items-center justify-center mx-auto mb-4 text-amber-500 border border-amber-500/20",children:e.jsx(Bt,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Unsaved Data Detected"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Secure local draft before termination?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:q,className:"w-full bg-cyan-600 text-white py-3 rounded-lg font-semibold hover:bg-cyan-500 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(8,145,178,0.3)]",children:[e.jsx(K,{size:18})," Secure Draft & Exit"]}),e.jsx("button",{onClick:T,className:"w-full bg-transparent border border-red-900/50 text-red-400 py-3 rounded-lg font-semibold hover:bg-red-950/30 hover:border-red-500 transition-all",children:"Purge Data & Exit"}),e.jsx("button",{onClick:()=>A(!1),className:"w-full text-slate-500 py-2 hover:text-slate-300 text-sm",children:"Return to Editor"})]})]})}),e.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-cyan-500 to-transparent opacity-50"}),e.jsxs("div",{className:"p-5 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 md:mb-8 pb-4 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-slate-800 border border-slate-700 ${a.replace("bg-","text-")}`,children:e.jsx(d,{size:28})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white tracking-wide",children:[s," Protocol"]}),e.jsx("p",{className:"text-slate-500 text-xs md:text-sm font-mono uppercase",children:"Input Required Data"})]})]}),e.jsx("button",{type:"button",onClick:y,className:"text-slate-500 hover:text-white hover:bg-slate-800 p-2 rounded-full transition-colors",children:e.jsx(ce,{size:24})})]}),e.jsxs("form",{ref:N,onSubmit:r,children:[e.jsx(Qe,{initialData:c,currentUser:x}),f,e.jsxs("div",{className:"mt-8 flex flex-col-reverse sm:flex-row justify-end gap-3 pt-6 border-t border-slate-800",children:[e.jsx("button",{type:"button",onClick:y,className:"flex items-center justify-center gap-2 bg-transparent border border-slate-700 text-slate-400 px-6 py-3 rounded-lg font-semibold hover:bg-slate-800 hover:text-white transition-all",children:"Abort"}),e.jsxs("button",{type:"button",onClick:I,className:"flex items-center justify-center gap-2 bg-slate-800 border border-slate-700 text-cyan-400 px-6 py-3 rounded-lg font-semibold hover:bg-slate-700 hover:border-cyan-500/50 transition-all",children:[e.jsx(K,{size:18})," Save Draft"]}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-cyan-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-cyan-500 transition-all shadow-[0_0_20px_rgba(8,145,178,0.4)] tracking-wide",children:"INITIALIZE REQUEST"})]})]})]})]})}function ge({inventory:s,category:d}){const a=Object.entries(s).filter(([f,p])=>p.category===d);return e.jsxs("div",{className:"bg-slate-950/50 p-4 rounded-lg border border-slate-800 mt-4",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 border-b border-slate-800 pb-2",children:"Equipment Request"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:a.map(([f,p])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 border border-slate-800 rounded hover:border-slate-600 transition-colors",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-200 font-medium",children:f}),p.requiresTraining&&e.jsxs("span",{className:"text-[10px] text-amber-500 flex items-center gap-1",children:[e.jsx(Ee,{size:10})," Training Req."]})]}),e.jsx("input",{type:"number",name:`gear_${f}`,min:"0",max:"5",placeholder:"0",className:"w-12 bg-slate-950 border border-slate-700 rounded p-1 text-center text-white text-sm focus:border-cyan-500 outline-none"})]},f))})]})}function tt(s){return e.jsx(V,{title:"Film & TV",icon:Ce,colorClass:"bg-cyan-400",...s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Checkout Date"}),e.jsx("input",{type:"date",name:"checkoutDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Return Date"}),e.jsx("input",{type:"date",name:"returnDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Shoot Location"}),e.jsx("input",{type:"text",name:"location",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"e.g. Gym, Field, Off-campus",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Project Details"}),e.jsx("textarea",{name:"details",rows:3,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"Describe the shoot...",required:!0})]}),e.jsx(ge,{inventory:s.inventory,category:"film"})]})})}function st(s){return e.jsx(V,{title:"Photography",icon:ie,colorClass:"bg-pink-400",...s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Checkout Date"}),e.jsx("input",{type:"date",name:"checkoutDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Return Date"}),e.jsx("input",{type:"date",name:"returnDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Event / Subject"}),e.jsx("input",{type:"text",name:"eventSubject",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"e.g. Senior Portraits",required:!0})]}),e.jsx(ge,{inventory:s.inventory,category:"photo"})]})})}function at(s){return e.jsx(V,{title:"Graphic Design",icon:De,colorClass:"bg-fuchsia-400",...s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Deadline"}),e.jsx("input",{type:"date",name:"deadline",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Format"}),e.jsxs("select",{name:"format",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",children:[e.jsx("option",{children:"Digital (Social Media/Web)"}),e.jsx("option",{children:"Print (Poster/Flyer)"}),e.jsx("option",{children:"Apparel"}),e.jsx("option",{children:"Logo / Branding"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Design Brief"}),e.jsx("textarea",{name:"brief",rows:4,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"Describe colors, style, text required...",required:!0})]})]})})}function rt(s){return e.jsx(V,{title:"Business & Startup",icon:oe,colorClass:"bg-emerald-400",...s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Meeting Date"}),e.jsx("input",{type:"date",name:"eventDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Service Type"}),e.jsxs("select",{name:"serviceType",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",children:[e.jsx("option",{children:"Consultation"}),e.jsx("option",{children:"Business Plan Review"}),e.jsx("option",{children:"Marketing Strategy"}),e.jsx("option",{children:"Pitch Deck Prep"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Objective"}),e.jsx("textarea",{name:"objective",rows:4,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"What are your goals?",required:!0})]})]})})}function lt(s){return e.jsx(V,{title:"Culinary Arts",icon:Ae,colorClass:"bg-amber-400",...s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Event Date"}),e.jsx("input",{type:"date",name:"eventDate",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Headcount"}),e.jsx("input",{type:"number",name:"headcount",className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"e.g. 50",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-slate-500 uppercase mb-1 ml-1",children:"Menu Requirements"}),e.jsx("textarea",{name:"menu",rows:4,className:"w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-slate-200 focus:border-cyan-500 outline-none",placeholder:"Dietary restrictions, food preferences...",required:!0})]})]})})}function nt({onExit:s}){const d=l.useRef(null),[a,f]=l.useState("start"),[p,c]=l.useState(0),[j,x]=l.useState(parseInt(localStorage.getItem("lancer_highscore")||"0")),C=.6,N=-10,D=5,k=50,A=l.useRef({x:50,y:200,vy:0,width:40,height:40,isJumping:!1}),h=l.useRef([]),I=l.useRef(0),y=l.useRef(0),q=l.useRef(null),T=()=>{A.current.isJumping||(A.current.vy=N,A.current.isJumping=!0)},r=()=>{f("playing"),c(0),y.current=0,A.current={x:50,y:200,vy:0,width:40,height:40,isJumping:!1},h.current=[],I.current=0,v()},v=()=>{const o=d.current;if(!o)return;const u=o.getContext("2d");u.fillStyle="#0f172a",u.fillRect(0,0,o.width,o.height),u.strokeStyle="#22d3ee",u.lineWidth=2,u.beginPath(),u.moveTo(0,o.height-k),u.lineTo(o.width,o.height-k),u.stroke();const b=A.current;if(b.vy+=C,b.y+=b.vy,b.y>o.height-k-b.height&&(b.y=o.height-k-b.height,b.vy=0,b.isJumping=!1),u.font="32px Arial",u.fillText("🏇",b.x,b.y+32),I.current++,I.current%100===0){const t=Math.random()>.5?"📹":"F";h.current.push({x:o.width,y:o.height-k-30,width:30,height:30,type:t})}for(let t=h.current.length-1;t>=0;t--){const n=h.current[t];if(n.x-=D,u.fillStyle=n.type==="F"?"#ef4444":"#fbbf24",u.font="28px Arial",u.fillText(n.type,n.x,n.y+28),b.x<n.x+n.width&&b.x+b.width>n.x&&b.y<n.y+n.height&&b.y+b.height>n.y){S();return}n.x+n.width<0&&(h.current.splice(t,1),y.current+=10,c(y.current))}u.fillStyle="#fff",u.font="16px monospace",u.fillText(`SCORE: ${y.current}`,10,20),q.current=requestAnimationFrame(v)},S=()=>{cancelAnimationFrame(q.current),f("gameover"),y.current>j&&(x(y.current),localStorage.setItem("lancer_highscore",y.current.toString()))};return l.useEffect(()=>{const o=u=>{(u.code==="Space"||u.code==="ArrowUp")&&(a==="playing"?T():a!=="playing"&&r())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[a]),e.jsxs("div",{className:"max-w-3xl mx-auto bg-black border-4 border-slate-700 rounded-xl overflow-hidden font-mono shadow-2xl relative animate-fade-in select-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-10 pointer-events-none bg-[length:100%_2px,3px_100%]"}),e.jsxs("div",{className:"bg-slate-900 p-4 border-b-4 border-slate-700 flex justify-between items-center relative z-20",children:[e.jsxs("div",{className:"text-green-400 text-xs flex items-center gap-2",children:[e.jsx(Pt,{size:14})," LANCER_RUN.EXE"]}),e.jsxs("div",{className:"text-yellow-400 text-xs flex items-center gap-2",children:[e.jsx(Ut,{size:14})," HI-SCORE: ",j]}),e.jsx("button",{onClick:s,className:"text-red-500 hover:text-red-400 text-xs uppercase font-bold",children:"[ EXIT SYSTEM ]"})]}),e.jsxs("div",{className:"relative bg-slate-950",style:{height:"300px"},children:[e.jsx("canvas",{ref:d,width:700,height:300,className:"w-full h-full block"}),a==="start"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70 z-20",children:[e.jsx("h2",{className:"text-4xl font-bold text-cyan-400 mb-4 tracking-widest glitch-text",children:"LANCER RUN"}),e.jsx("p",{className:"text-slate-300 text-sm mb-6",children:"Space/Up to Jump. Avoid the F's!"}),e.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded blink-anim",children:"INSERT COIN (START)"})]}),a==="gameover"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/40 z-20 backdrop-blur-sm",children:[e.jsx("h2",{className:"text-4xl font-bold text-red-500 mb-2",children:"CRITICAL FAILURE"}),e.jsxs("p",{className:"text-white text-xl mb-6",children:["FINAL SCORE: ",p]}),e.jsx("button",{onClick:r,className:"px-6 py-2 bg-white text-black font-bold rounded hover:bg-slate-200",children:"RETRY MISSION"})]})]})]})}};mt.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Ht,{})}));
